{"version":3,"sources":["webpack:///./src/views/comic/index.vue","webpack:///./src/components/Comment/CommentBox.vue","webpack:///src/components/Comment/CommentBox.vue","webpack:///./src/components/Comment/CommentBox.vue?39b2","webpack:///./src/components/Comment/CommentBox.vue?abbc","webpack:///./src/components/Comment/Comment.vue","webpack:///src/components/Comment/Comment.vue","webpack:///./src/components/Comment/Comment.vue?e788","webpack:///./src/components/Comment/Comment.vue?0ef7","webpack:///src/views/comic/index.vue","webpack:///./src/views/comic/index.vue?a63f","webpack:///./src/views/comic/index.vue?fa8a","webpack:///./src/components/Comment/Comment.vue?5829","webpack:///./src/components/Nav/NavPag.vue","webpack:///src/components/Nav/NavPag.vue","webpack:///./src/components/Nav/NavPag.vue?366b","webpack:///./src/components/Nav/NavPag.vue?b9d8","webpack:///./src/views/comic/index.vue?71ed","webpack:///./src/components/Favourite/index.vue","webpack:///src/components/Favourite/index.vue","webpack:///./src/components/Favourite/index.vue?8e57","webpack:///./src/components/Favourite/index.vue?ffac","webpack:///./src/components/Comment/CommentBox.vue?6472"],"names":["render","_vm","this","_c","_self","attrs","loading","_v","_e","comic","staticClass","title","_s","author","Date","createTime","toLocaleDateString","staticStyle","_l","categories","category","key","id","concat","name","lastUpdate","lastRecord","chapter","page","firstChapter","comicId","favourite","chapters","pages","now","class","active","pageNum","on","$event","preventDefault","fetchChapters","pageSize","Math","ceil","size","row","min","col","calcIndex","list","addComment","comments","comment","repliesMap","fetchComments","staticRenderFns","isLogin","user","icon","directives","rawName","value","commentTxt","expression","modifiers","domProps","target","props","String","Number","data","computed","_objectSpread","mapGetters","methods","_this","length","putRequest","text","then","resp","console","log","$emit","component","username","formatData","replyClick","replies","reply","disabled","isFirstPage","fetchReplies","prePage","isLastPage","nextPage","commentBoxSeen","replyComment","Object","firstReplies","arguments","undefined","service","get","params","_this2","push","formatDate","components","NavPag","Comment","CommentBox","Favourite","$route","created","fetchData","watch","query","last_record","first_chapter","document","_this3","unshift","action","index","Function","path","fav","position","deleteFav","addFav","Boolean","type","default","post"],"mappings":"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","file":"js/chunk-b27e9f60.caf6615c.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"comic\"}},[(_vm.loading)?_c('div',[_c('h4',[_vm._v(\"加载中...\")])]):_vm._e(),(_vm.comic)?_c('div',{staticClass:\"card\",attrs:{\"id\":\"comic-summary\"}},[_c('div',{staticClass:\"row no-gutters mb-3\"},[_c('div',{staticClass:\"col-sm-3\"},[_c('img',{staticClass:\"card-img border\",attrs:{\"alt\":'/' + _vm.comic.title + '/cover.jpg',\"src\":'/api/' + _vm.comic.title + '/cover.jpg'}})]),_c('div',{staticClass:\"col-8\"},[_c('div',{staticClass:\"card-body pt-1\"},[_c('h2',{staticClass:\"card-title\"},[_vm._v(_vm._s(_vm.comic.title))]),_c('div',{staticClass:\"pb-2 text-secondary\"},[_c('router-link',{staticClass:\"muted-link\",attrs:{\"to\":'/api/esComic/search?author=' + _vm.comic.author,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.comic.author)+\" \")]),_c('span',[_vm._v(\" , \"+_vm._s(new Date(_vm.comic.createTime).toLocaleDateString())+\" \")])],1),_c('div',{staticClass:\"text-muted pb-2\"},[_c('img',{staticStyle:{\"width\":\"16px\",\"height\":\"16px\"},attrs:{\"alt\":\"/images/icons/tag.svg\",\"src\":\"/api/images/icons/tag.svg\"}}),_c('span',_vm._l((_vm.comic.categories),function(category){return _c('router-link',{key:category.id,attrs:{\"to\":`/category?categoryId=${category.id}`}},[_vm._v(\" \"+_vm._s(category.name)+\"  \")])}),1)]),_c('div',{staticClass:\"text-muted pb-5\"},[_c('img',{staticStyle:{\"width\":\"16px\",\"height\":\"16px\"},attrs:{\"alt\":\"/images/icons/calendar.svg\",\"src\":\"/api/images/icons/calendar.svg\"}}),_c('span',[_vm._v(\" 最近更新: \"+_vm._s(new Date(_vm.comic.lastUpdate).toLocaleDateString())+\" \")])]),_c('div',{staticClass:\"mt-5\"},[(_vm.lastRecord)?_c('router-link',{staticClass:\"btn btn-outline-primary mr-3\",attrs:{\"to\":'/chapter/' + _vm.lastRecord.chapter.id + '?page=' + _vm.lastRecord.page,\"target\":\"_blank\"}},[_vm._v(\"继续阅读\")]):(_vm.firstChapter)?_c('router-link',{staticClass:\"btn btn-outline-primary mr-3\",attrs:{\"to\":'/chapter/' + _vm.firstChapter.id,\"target\":\"_blank\"}},[_vm._v(\"开始阅读\")]):_vm._e(),_c('favourite',{attrs:{\"comic-id\":_vm.comicId,\"favourite\":_vm.favourite}})],1)])])]),_c('div',{staticClass:\"mb-3 align-self-center\",attrs:{\"id\":\"chapters-info\"}},[_c('h3',[_vm._v(\"章节列表\")]),_c('ul',{staticClass:\"list-inline\"},_vm._l((_vm.chapters.pages),function(now){return _c('li',{key:now,staticClass:\"list-inline-item\",class:{active: now === _vm.chapters.pageNum}},[_c('a',{on:{\"click\":function($event){$event.preventDefault();return _vm.fetchChapters(now, _vm.chapters.pageSize)}}},[_vm._v(\" \"+_vm._s(_vm.chapters.pageSize * (now - 1) + 1)+\" - \"+_vm._s(_vm.chapters.pageSize * now)+\" \")])])}),0),_c('div',{attrs:{\"id\":\"chapter-list\"}},_vm._l((Math.ceil(_vm.chapters.size / 5)),function(row){return _c('div',{key:row,staticClass:\"chapter-line\"},_vm._l((Math.min(_vm.chapters.size - (row-1) * 5, 5)),function(col){return _c('router-link',{key:col,staticClass:\"btn btn-outline-info text-truncate\",attrs:{\"title\":_vm.calcIndex(row, col) + 1 + ' ' + _vm.chapters.list[_vm.calcIndex(row, col)].title,\"to\":'/chapter/' + _vm.chapters.list[_vm.calcIndex(row, col)].id,\"data-placement\":\"top\",\"data-toggle\":\"tooltip\",\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(_vm.calcIndex(row, col) + 1 + ' ' + _vm.chapters.list[_vm.calcIndex(row, col)].title)+\" \")])}),1)}),0)]),_c('div',[_c('h3',[_vm._v(\"评论\")]),_c('comment-box',{attrs:{\"comic-id\":_vm.comicId},on:{\"addComment\":_vm.addComment}}),_c('hr'),_c('h3',[_vm._v(\"最新评论\")]),(_vm.comments)?_c('div',{staticClass:\"comments\"},[_vm._l((_vm.comments.list),function(comment){return _c('comment',{key:comment.id,attrs:{\"comment\":comment,\"firstReplies\":_vm.repliesMap[comment.id]}})}),(!_vm.comments.size)?_c('div',{staticClass:\"text-center text-muted mb-4\"},[_vm._v(\" 目前尚未有评论。 \")]):_vm._e(),_c('nav-pag',{attrs:{\"action\":_vm.fetchComments,\"pages\":_vm.comments}})],2):_vm._e(),(_vm.comments && _vm.comments.size > 5)?_c('comment-box',{attrs:{\"comic-id\":_vm.comicId},on:{\"addComment\":_vm.addComment}}):_vm._e()],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isLogin())?_c('div',{staticClass:\"comment-area\"},[_c('div',{staticClass:\"user-face pr-4\"},[_c('img',{attrs:{\"alt\":'/api/' + _vm.user.icon,\"src\":'/api/' + _vm.user.icon}})]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model.lazy\",value:(_vm.commentTxt),expression:\"commentTxt\",modifiers:{\"lazy\":true}}],staticClass:\"form-control comment-text mr-4\",attrs:{\"autocomplete\":\"off\",\"cols\":\"8\",\"maxlength\":\"500\",\"placeholder\":\"写下你的评论...\",\"required\":\"\",\"rows\":\"2\"},domProps:{\"value\":(_vm.commentTxt)},on:{\"change\":function($event){_vm.commentTxt=$event.target.value}}}),_c('button',{staticClass:\"btn btn-primary btn-comment align-self-center\",on:{\"click\":_vm.comment}},[_vm._v(\"评论\")])]):_c('div',{staticClass:\"comment-area\"})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"comment-area\" v-if=\"isLogin()\">\n    <div class=\"user-face pr-4\">\n      <img :alt=\"'/api/' + user.icon\" :src=\"'/api/' + user.icon\">\n    </div>\n    <textarea autocomplete=\"off\" class=\"form-control comment-text mr-4\" cols=\"8\" maxlength=\"500\"\n              placeholder=\"写下你的评论...\" required rows=\"2\" v-model.lazy=\"commentTxt\"></textarea>\n    <button @click=\"comment\" class=\"btn btn-primary btn-comment align-self-center\">评论</button>\n  </div>\n  <!--                TODO: 处理匿名用户反馈-->\n  <div class=\"comment-area\" v-else>\n  </div>\n</template>\n\n<script>\n  import {isLogin} from \"@/api/auth\";\n  import {mapGetters} from \"vuex\";\n  import {putRequest} from \"@/api/api\";\n\n  export default {\n    name: \"CommentBox\",\n    props: {\n      comicId: [String, Number]\n    },\n\n    data() {\n      return {\n        commentTxt: ''\n      }\n    },\n\n    computed: {\n      ...mapGetters([\n        'user'\n      ])\n    },\n\n    methods: {\n      isLogin: () => isLogin(),\n\n      comment() {\n        if (this.commentTxt && this.commentTxt.length) {\n          putRequest('/api/comment', {\n            comic: {id: this.comicId},\n            text: this.commentTxt\n          }).then(resp => {\n            console.log(resp);\n            if (resp)\n              this.$emit('addComment', resp);\n          })\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .comment-area{\n    max-width: 900px;\n    display: flex;\n    padding-top: .5rem!important;\n    margin-bottom: 1.5rem!important;\n  }\n\n  .user-face img{\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n  }\n\n  .btn-comment{\n    width: 60px;\n    height: 40px;\n  }\n\n  .comment-text {\n    width: 700px;\n    resize: none;\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentBox.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentBox.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CommentBox.vue?vue&type=template&id=a80a457c&scoped=true\"\nimport script from \"./CommentBox.vue?vue&type=script&lang=js\"\nexport * from \"./CommentBox.vue?vue&type=script&lang=js\"\nimport style0 from \"./CommentBox.vue?vue&type=style&index=0&id=a80a457c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a80a457c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"comment pr-4 border-bottom\"},[_c('div',{staticClass:\"user-face pr-4\"},[_c('img',{attrs:{\"alt\":'/api/' + _vm.comment.user.icon,\"src\":'/api/' + _vm.comment.user.icon}})]),_c('div',{staticClass:\"comment-details\"},[_c('div',{staticClass:\"mb-2\"},[_c('router-link',{staticClass:\"username\",attrs:{\"to\":'/user/' + _vm.comment.user.id + '/favourite'}},[_vm._v(\" \"+_vm._s(_vm.comment.user.username)+\" \")])],1),_c('div',{staticClass:\"mb-1\"},[_vm._v(_vm._s(_vm.comment.text))]),_c('div',{staticClass:\"text-muted reply-info\"},[_c('span',[_vm._v(_vm._s(_vm.formatData(_vm.comment.createTime)))]),_c('span',{staticClass:\"ml-3 btn-reply-wrap\",on:{\"click\":function($event){return _vm.replyClick(null)}}},[_vm._v(\" 回复 \")])]),(_vm.replies)?[_vm._l((_vm.replies.list),function(reply){return _c('div',{key:reply.id,staticClass:\"reply\"},[_c('div',{staticClass:\"user-face-reply pr-2\"},[_c('img',{attrs:{\"alt\":'/api/' + reply.user.icon,\"src\":'/api/' + reply.user.icon}})]),_c('div',[_c('div',{staticClass:\"mb-1\"},[_c('span',{staticClass:\"pr-2\"},[_c('router-link',{staticClass:\"username\",attrs:{\"to\":'/user/' + _vm.comment.user.id + '/favourite'}},[_vm._v(\" \"+_vm._s(reply.user.username)+\" \")])],1),(reply.reply)?_c('span',[_vm._v(\" 回复 \"),_c('router-link',{attrs:{\"to\":'/user/' + reply.reply.user.id + '/favourite'}},[_vm._v(\" \"+_vm._s(reply.reply.user.username)+\" \")]),_c('span',[_vm._v(\": \"+_vm._s(reply.text))])],1):_c('span',[_vm._v(_vm._s(reply.text))])]),_c('div',{staticClass:\"text-muted reply-info\"},[_c('span',[_vm._v(_vm._s(_vm.formatData(reply.createTime)))]),_c('span',{staticClass:\"ml-3 btn-reply-wrap\",on:{\"click\":function($event){return _vm.replyClick(reply)}}},[_vm._v(\" 回复 \")])])])])}),(_vm.replies.pages > 1)?_c('ul',{staticClass:\"list-inline justify-content-end\"},[_c('li',{staticClass:\"list-inline-item\",class:{ disabled: _vm.replies.isFirstPage }},[_c('span',{on:{\"click\":function($event){return _vm.fetchReplies(_vm.replies.prePage, _vm.replies.pageSize)}}},[_vm._v(\"上一页\")])]),_vm._l((_vm.replies.pages),function(now){return _c('li',{key:now,staticClass:\"list-inline-item\",class:{ active: now === _vm.replies.pageNum }},[_c('span',{on:{\"click\":function($event){return _vm.fetchReplies(now, _vm.replies.pageSize)}}},[_vm._v(\" \"+_vm._s(now)+\" \")])])}),_c('li',{staticClass:\"list-inline-item\",class:{ disabled: _vm.replies.isLastPage }},[_c('span',{on:{\"click\":function($event){return _vm.fetchReplies(_vm.replies.nextPage, _vm.replies.pageSize)}}},[_vm._v(\"下一页\")])])],2):_vm._e(),(_vm.commentBoxSeen)?[(_vm.isLogin())?_c('div',{staticClass:\"comment-area\"},[_c('div',{staticClass:\"user-face pr-4\"},[_c('img',{attrs:{\"alt\":'/api/' + _vm.user.icon,\"src\":'/api/' + _vm.user.icon}})]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model.lazy\",value:(_vm.commentTxt),expression:\"commentTxt\",modifiers:{\"lazy\":true}}],staticClass:\"form-control comment-text mr-4\",attrs:{\"autocomplete\":\"off\",\"cols\":\"8\",\"maxlength\":\"500\",\"placeholder\":\"写下你的评论...\",\"required\":\"\",\"rows\":\"2\"},domProps:{\"value\":(_vm.commentTxt)},on:{\"change\":function($event){_vm.commentTxt=$event.target.value}}}),_c('button',{staticClass:\"btn btn-primary btn-comment align-self-center\",on:{\"click\":_vm.replyComment}},[_vm._v(\"评论\")])]):_c('div',{staticClass:\"comment-area\"})]:_vm._e()]:_vm._e()],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"comment pr-4 border-bottom\">\n    <div class=\"user-face pr-4\">\n      <img :alt=\"'/api/' + comment.user.icon\" :src=\"'/api/' + comment.user.icon\">\n    </div>\n    <div class=\"comment-details\">\n      <div class=\"mb-2\">\n        <router-link :to=\"'/user/' + comment.user.id + '/favourite'\"\n           class=\"username\">\n          {{ comment.user.username }}\n        </router-link>\n      </div>\n      <div class=\"mb-1\">{{ comment.text }}</div>\n      <div class=\"text-muted reply-info\">\n        <span>{{ formatData(comment.createTime) }}</span>\n        <span @click=\"replyClick(null)\" class=\"ml-3 btn-reply-wrap\">\n          回复\n        </span>\n      </div>\n\n      <template v-if=\"replies\">\n        <div :key=\"reply.id\" class=\"reply\" v-for=\"reply of replies.list\">\n          <div class=\"user-face-reply pr-2\">\n            <img :alt=\"'/api/' + reply.user.icon\" :src=\"'/api/' + reply.user.icon\">\n          </div>\n          <div>\n            <div class=\"mb-1\">\n              <span class=\"pr-2\">\n                  <router-link :to=\"'/user/' + comment.user.id + '/favourite'\" class=\"username\">\n                    {{ reply.user.username }}\n                  </router-link>\n              </span>\n              <span v-if=\"reply.reply\">\n                回复\n                <router-link :to=\"'/user/' + reply.reply.user.id + '/favourite'\">\n                  {{ reply.reply.user.username }}\n                </router-link>\n                <span>:&nbsp;{{ reply.text }}</span>\n              </span>\n              <span v-else>{{ reply.text }}</span>\n            </div>\n            <div class=\"text-muted reply-info\">\n              <span>{{ formatData(reply.createTime) }}</span>\n              <span @click=\"replyClick(reply)\" class=\"ml-3 btn-reply-wrap\">\n                回复\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <ul class=\"list-inline justify-content-end\" v-if=\"replies.pages > 1\">\n          <li :class=\"{ disabled: replies.isFirstPage }\" class=\"list-inline-item\">\n            <span @click=\"fetchReplies(replies.prePage, replies.pageSize)\">上一页</span>\n          </li>\n          <li :class=\"{ active: now === replies.pageNum }\" :key=\"now\"\n              class=\"list-inline-item\" v-for=\"now in replies.pages\">\n              <span @click=\"fetchReplies(now, replies.pageSize)\">\n                {{ now }}\n              </span>\n          </li>\n          <li :class=\"{ disabled: replies.isLastPage }\" class=\"list-inline-item\">\n            <span @click=\"fetchReplies(replies.nextPage, replies.pageSize)\">下一页</span>\n          </li>\n        </ul>\n\n        <template v-if=\"commentBoxSeen\">\n          <div class=\"comment-area\" v-if=\"isLogin()\">\n            <div class=\"user-face pr-4\">\n              <img :alt=\"'/api/' + user.icon\" :src=\"'/api/' + user.icon\">\n            </div>\n            <textarea autocomplete=\"off\" class=\"form-control comment-text mr-4\" cols=\"8\" maxlength=\"500\"\n                      placeholder=\"写下你的评论...\" required rows=\"2\" v-model.lazy=\"commentTxt\"></textarea>\n            <button @click=\"replyComment\" class=\"btn btn-primary btn-comment align-self-center\">评论</button>\n          </div>\n          <!--                TODO: 处理匿名用户反馈-->\n          <div class=\"comment-area\" v-else>\n          </div>\n        </template>\n      </template>\n\n<!--      <div class=\"comment-area pr-4\" sec:authorize=\"isAnonymous()\"></div>-->\n    </div>\n  </div>\n</template>\n\n<script>\n  import {service} from \"@/api/api\";\n  import {mapGetters} from \"vuex\";\n  import {isLogin} from \"@/api/auth\";\n  import {formatDate} from \"@/utils/utils\";\n\n  export default {\n    name: \"Comment\",\n\n    props: {\n      comment: Object,\n      firstReplies: Object\n    },\n\n    data() {\n      return {\n        reply: null,\n        commentBoxSeen: false,\n        commentTxt: '',\n        replies: this.firstReplies\n      }\n    },\n\n    computed: {\n      ...mapGetters([\n        'user'\n      ]),\n    },\n\n    methods: {\n      isLogin: () => isLogin(),\n\n      fetchReplies(pageNum = 1, pageSize = 10) {\n        service.get('/api/comment/' + this.comment.id + '/replies', {\n          params: {\n            pageNum,\n            pageSize\n          }\n        }).then(resp => {\n          this.replies = resp;\n        })\n      },\n\n      replyClick(reply) {\n        this.reply = reply;\n        this.commentBoxSeen = true\n      },\n\n      replyComment() {\n        if (this.commentTxt && this.commentTxt.length) {\n          this.putRequest('/api/comment/reply', {\n            reply: this.reply ? { id: this.reply.id } : null,\n            comment: {id: this.comment.id},\n            text: this.commentTxt\n          }).then(resp => {\n            // console.log(resp);\n            resp.reply.user = this.reply.reply.user;\n            this.replies.list.push(resp);\n            this.commentTxt = ''\n          })\n        }\n      },\n\n      formatData: data => formatDate(data)\n    }\n  }\n</script>\n\n<style scoped>\n  .comment-area, .comment, .reply {\n    max-width: 900px;\n    display: flex;\n    padding-top: .5rem!important;\n    margin-bottom: 1.5rem!important;\n  }\n\n  .reply {\n    margin-bottom: .5rem!important;\n  }\n\n  .reply-info {\n    font-size: 14px;\n  }\n\n  .user-face img{\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n  }\n\n  .user-face-reply img {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n  }\n\n  .username {\n    color: #6d757a;\n    font-size: 12px;\n    font-weight: 700;\n    line-height: 18px;\n    text-decoration: none;\n  }\n\n  .comment-text {\n    width: 700px;\n    resize: none;\n  }\n\n  .btn-comment {\n    width: 60px;\n    height: 40px;\n  }\n\n  .btn-reply-wrap {\n    cursor: pointer;\n  }\n\n  .btn-reply-wrap:hover {\n    font-weight: 700;\n    text-decoration: underline;\n  }\n\n  .list-inline-item {\n    color: black;\n    font-size: 12px;\n    cursor: pointer;\n  }\n\n  .active {\n    color: #007bff;\n    font-weight: 700;\n  }\n\n  .disabled {\n  cursor: default;\n  }\n\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Comment.vue?vue&type=template&id=9496109e&scoped=true\"\nimport script from \"./Comment.vue?vue&type=script&lang=js\"\nexport * from \"./Comment.vue?vue&type=script&lang=js\"\nimport style0 from \"./Comment.vue?vue&type=style&index=0&id=9496109e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9496109e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"comic\">\n    <div v-if=\"loading\">\n      <h4>加载中...</h4>\n    </div>\n\n    <div class=\"card\" id=\"comic-summary\" v-if=\"comic\">\n      <div class=\"row no-gutters mb-3\">\n        <div class=\"col-sm-3\">\n          <img :alt=\"'/' + comic.title + '/cover.jpg'\" :src=\"'/api/' + comic.title + '/cover.jpg'\" class=\"card-img border\">\n        </div>\n        <div class=\"col-8\">\n          <div class=\"card-body pt-1\">\n            <h2 class=\"card-title\">{{ comic.title }}</h2>\n            <div class=\"pb-2 text-secondary\">\n              <router-link :to=\"'/api/esComic/search?author=' + comic.author\" class=\"muted-link\"\n                 target=\"_blank\">\n                {{ comic.author }}\n              </router-link>\n              <span>\n                , {{ new Date(comic.createTime).toLocaleDateString() }}\n              </span>\n            </div>\n            <div class=\"text-muted pb-2\">\n              <img alt=\"/images/icons/tag.svg\" src=\"/api/images/icons/tag.svg\" style=\"width: 16px; height: 16px\">\n              <span>\n                <router-link :key=\"category.id\" :to=\"`/category?categoryId=${category.id}`\"\n                   v-for=\"category in comic.categories\">\n                  {{ category.name }}&nbsp;\n                </router-link>\n              </span>\n            </div>\n            <div class=\"text-muted pb-5\">\n              <img alt=\"/images/icons/calendar.svg\" src=\"/api/images/icons/calendar.svg\" style=\"width: 16px; height: 16px\">\n              <span>\n                最近更新: {{ new Date(comic.lastUpdate).toLocaleDateString() }}\n              </span>\n            </div>\n            <div class=\"mt-5\">\n              <router-link :to=\"'/chapter/' + lastRecord.chapter.id + '?page=' + lastRecord.page\" class=\"btn btn-outline-primary mr-3\" target=\"_blank\"\n                 v-if=\"lastRecord\">继续阅读</router-link>\n              <router-link :to=\"'/chapter/' + firstChapter.id\" class=\"btn btn-outline-primary mr-3\" target=\"_blank\"\n                 v-else-if=\"firstChapter\">开始阅读</router-link>\n              <favourite :comic-id=\"comicId\" :favourite=\"favourite\"></favourite>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"mb-3 align-self-center\" id=\"chapters-info\">\n        <h3>章节列表</h3>\n        <ul class=\"list-inline\">\n          <li :class=\"{active: now === chapters.pageNum}\" :key=\"now\"\n              class=\"list-inline-item\" v-for=\"now in chapters.pages\">\n            <a @click.prevent=\"fetchChapters(now, chapters.pageSize)\">\n              {{ chapters.pageSize * (now - 1) + 1 }} - {{ chapters.pageSize * now }}\n            </a>\n          </li>\n        </ul>\n        <div id=\"chapter-list\">\n          <div :key=\"row\" class=\"chapter-line\" v-for=\"row in Math.ceil(chapters.size / 5)\">\n            <router-link :key=\"col\" :title=\"calcIndex(row, col) + 1 + ' ' + chapters.list[calcIndex(row, col)].title\"\n               :to=\"'/chapter/' + chapters.list[calcIndex(row, col)].id\" class=\"btn btn-outline-info text-truncate\"\n               data-placement=\"top\" data-toggle=\"tooltip\"\n               target=\"_blank\"\n               v-for=\"col in Math.min(chapters.size - (row-1) * 5, 5)\">\n              {{ calcIndex(row, col) + 1 + ' ' + chapters.list[calcIndex(row, col)].title}}\n            </router-link>\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <h3>评论</h3>\n        <comment-box :comic-id=\"comicId\" v-on:addComment=\"addComment\"></comment-box>\n        <hr>\n\n        <h3>最新评论</h3>\n        <div class=\"comments\" v-if=\"comments\">\n          <comment :comment=\"comment\" :firstReplies=\"repliesMap[comment.id]\"\n                   :key=\"comment.id\" v-for=\"comment of comments.list\">\n          </comment>\n          <div class=\"text-center text-muted mb-4\" v-if=\"!comments.size\">\n            目前尚未有评论。\n          </div>\n          <nav-pag :action=\"fetchComments\" :pages=\"comments\"></nav-pag>\n        </div>\n\n        <comment-box :comic-id=\"comicId\"\n                     v-if=\"comments && comments.size > 5\" v-on:addComment=\"addComment\">\n        </comment-box>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {service} from \"@/api/api\";\n  import Favourite from \"@/components/Favourite/index\";\n  import CommentBox from \"@/components/Comment/CommentBox\";\n  import Comment from \"@/components/Comment/Comment\";\n  import NavPag from \"@/components/Nav/NavPag\";\n\n  export default {\n    name: \"Comic\",\n    components: {NavPag, Comment, CommentBox, Favourite},\n\n    data() {\n      return {\n        loading: false,\n        comic: null,\n        lastRecord: null,\n        chapters: null,\n        firstChapter: null,\n        favourite: false,\n\n        comments: null,\n        repliesMap: null\n      }\n    },\n\n    computed: {\n      comicId() {\n        return this.$route.params.id\n      }\n    },\n\n    created() {\n      this.fetchData()\n    },\n\n    watch: {\n      '$route': 'fetchData'\n    },\n\n    methods: {\n      fetchData() {\n        this.loading = true;\n        service.get('/api/comic/' + this.comicId, {\n          params: this.$route.query\n        }).then(resp => {\n          this.comic = resp.comic;\n          this.lastRecord = resp.last_record;\n          this.chapters = resp.pages;\n          this.firstChapter = resp.first_chapter;\n          this.favourite = resp.favourite;\n          document.title = this.comic.title;\n          this.loading = false;\n\n          this.fetchComments()\n        })\n      },\n\n      fetchChapters(pageNum = 1, pageSize = 50) {\n        service.get('/api/comic/' + this.comicId + '/chapters', {\n          params: {\n            pageNum,\n            pageSize\n          }\n        }).then(resp => {\n          this.chapters = resp;\n        })\n      },\n\n      fetchComments(pageNum = 1, pageSize = 20) {\n        service.get('/api/comment/' + this.comicId, {\n          params: {\n            pageNum,\n            pageSize\n          }\n        }).then(resp => {\n          // console.log(resp);\n          this.comments = resp.comments;\n          this.repliesMap = resp.repliesMap\n        })\n      },\n\n      addComment(comment) {\n        this.comments.list.unshift(comment)\n      },\n\n      calcIndex(row, col) {\n        // (row - 1) * 5 + col - 1\n        return 5 * row + col - 6;\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #comic {\n    position: absolute;\n    width: 100%;\n    /*height: 100%;*/\n    /*top: 0;*/\n    left: 0;\n    overflow-y: auto;\n    background-color: #fafafa;\n  }\n\n  #comic-summary {\n    /*background-color: #ffffff;*/\n    max-width: 1200px;\n    margin: 0 auto;\n    padding-top: 30px;\n    padding-left: 30px;\n    /*border: 1px solid #dee2e6!important;*/\n  }\n\n  .list-inline-item {\n    color: black;\n    font-size: 12px;\n    cursor: pointer;\n  }\n\n  .card-img {\n    width: 230px;\n    height: 283px;\n  }\n\n  .active {\n    color: #007bff;\n    font-weight: 700;\n  }\n\n  .disabled {\n    cursor: default;\n  }\n\n  .chapter-line{\n    display: flex;\n    margin-bottom: 16px;\n    flex-wrap: nowrap;\n  }\n\n  .chapter-line a {\n    /*display: block;*/\n    width: 200px;\n    height: 48px;\n    margin-right: 16px;\n    line-height: 34px;\n  }\n\n  .user-face-reply img {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n  }\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=40312418&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=40312418&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40312418\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=style&index=0&id=9496109e&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.pages.pages > 1)?_c('nav',{staticClass:\"mt-3\",attrs:{\"aria-label\":\"Page navigation example\",\"id\":\"nav-pag\"}},[_c('ul',{staticClass:\"pagination justify-content-center\"},[_c('li',{staticClass:\"page-item\",class:{disabled: _vm.pages.isFirstPage}},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\",\"tabindex\":\"-1\"},on:{\"click\":function($event){$event.preventDefault();return _vm.action(_vm.pages.prePage, _vm.pages.pageSize)}}},[_vm._v(\" Previous \")])]),_vm._l((_vm.pages.pages),function(index){return _c('li',{key:index,staticClass:\"page-item\",class:{active: index === _vm.pages.pageNum}},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.action(index, _vm.pages.pageSize)}}},[_vm._v(\" \"+_vm._s(index)+\" \")])])}),_c('li',{staticClass:\"page-item\",class:{disabled: _vm.pages.isLastPage}},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.action(_vm.pages.nextPage, _vm.pages.pageSize)}}},[_vm._v(\" Next \")])])],2)]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <nav aria-label=\"Page navigation example\" class=\"mt-3\" id=\"nav-pag\"\n       v-if=\"pages.pages > 1\">\n    <ul class=\"pagination justify-content-center\">\n      <li :class=\"{disabled: pages.isFirstPage}\" class=\"page-item\">\n        <a @click.prevent=\"action(pages.prePage, pages.pageSize)\" class=\"page-link\" href=\"#\" tabindex=\"-1\">\n          Previous\n        </a>\n      </li>\n      <li :class=\"{active: index === pages.pageNum}\" :key=\"index\"\n          class=\"page-item\" v-for=\"index in pages.pages\">\n        <a @click.prevent=\"action(index, pages.pageSize)\" class=\"page-link\" href=\"#\">\n          {{ index }}\n        </a>\n      </li>\n      <li :class=\"{disabled: pages.isLastPage}\" class=\"page-item\">\n        <a @click.prevent=\"action(pages.nextPage, pages.pageSize)\" class=\"page-link\" href=\"#\">\n          Next\n        </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\n  export default {\n    name: \"NavPag\",\n    props: {\n      pages: Object,\n      action: Function\n    },\n    data() {\n      return {\n        path: this.$route.path\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavPag.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavPag.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./NavPag.vue?vue&type=template&id=08d8b84e&scoped=true\"\nimport script from \"./NavPag.vue?vue&type=script&lang=js\"\nexport * from \"./NavPag.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08d8b84e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=40312418&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isLogin())?_c('span',[(_vm.fav)?_c('button',{staticClass:\"btn btn-outline-light btn-favourite\",attrs:{\"data-placement\":_vm.position,\"data-toggle\":\"tooltip\",\"title\":\"取消订阅\"},on:{\"click\":function($event){return _vm.deleteFav()}}},[_c('img',{attrs:{\"alt\":\"/images/icons/heart-fill.svg\",\"height\":\"30px\",\"src\":\"/api/images/icons/heart-fill.svg\",\"width\":\"30px\"}})]):_c('button',{staticClass:\"btn btn-outline-light btn-favourite\",attrs:{\"data-placement\":_vm.position,\"data-toggle\":\"tooltip\",\"title\":\"订阅\"},on:{\"click\":function($event){return _vm.addFav()}}},[_c('img',{attrs:{\"alt\":\"/images/icons/heart.svg\",\"height\":\"30px\",\"src\":\"/api/images/icons/heart.svg\",\"width\":\"30px\"}})])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span v-if=\"isLogin()\">\n    <button :data-placement=\"position\" @click=\"deleteFav()\"\n            class=\"btn btn-outline-light btn-favourite\"\n            data-toggle=\"tooltip\" title=\"取消订阅\" v-if=\"fav\">\n      <img alt=\"/images/icons/heart-fill.svg\"\n           height=\"30px\" src=\"/api/images/icons/heart-fill.svg\" width=\"30px\">\n    </button>\n    <button :data-placement=\"position\" @click=\"addFav()\"\n            class=\"btn btn-outline-light btn-favourite\"\n            data-toggle=\"tooltip\" title=\"订阅\" v-else>\n      <img alt=\"/images/icons/heart.svg\"\n           height=\"30px\" src=\"/api/images/icons/heart.svg\" width=\"30px\">\n    </button>\n  </span>\n</template>\n\n<script>\n  import {isLogin} from \"@/api/auth\";\n  import {service} from \"@/api/api\";\n\n  export default {\n    name: \"Favourite\",\n    props: {\n      favourite: Boolean,\n      comicId: [Number, String],\n      position: {\n        type: String,\n        default: 'top'\n      }\n    },\n\n    data() {\n      return {\n        fav: this.favourite\n      }\n    },\n\n    methods: {\n      isLogin: () => isLogin(),\n\n      addFav() {\n        service.post('/api/comic/' + this.comicId + '/addFavourite').then(() => {\n          this.fav = true;\n        })\n      },\n\n      deleteFav() {\n        service.post('/api/comic/' + this.comicId + '/deleteFavourite').then(() => {\n          this.fav = false;\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=04e9f0b4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04e9f0b4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentBox.vue?vue&type=style&index=0&id=a80a457c&prod&scoped=true&lang=css\""],"sourceRoot":""}