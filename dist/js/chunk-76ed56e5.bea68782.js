(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76ed56e5"],{"1fc2":function(a,s,e){"use strict";e.r(s);var t=function(){var a=this,s=a._self._c;return s("div",{staticClass:"row justify-content-center"},[s("sidebar-profile"),s("div",{staticClass:"profile mt-lg-1 col-6"},[s("div",{staticClass:"profile-item"},[s("div",[s("h4",[a._v("邮箱")]),s("span",{staticClass:"text-muted"},[a._v(" "+a._s(a.user.email?a.user.email:"未设置")+" ")])]),s("div",{staticClass:"profile-btn"},[s("a",{attrs:{"aria-expanded":"false","data-target":"#collapseEmail","data-toggle":"collapse",href:"#"}},[a._v(" "+a._s(a.user.email?"修改":"设置")+" ")])]),s("div",{staticClass:"collapse pt-2",attrs:{id:"collapseEmail"}},[s("form",{staticClass:"card card-body",attrs:{id:"email-form",novalidate:""},on:{submit:function(s){return s.preventDefault(),a.updateEmail.apply(null,arguments)}}},[s("div",{staticClass:"row mb-2"},[a._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:a.oldEmail.value,expression:"oldEmail.value"}],staticClass:"form-control col-4",class:a.oldEmail.inputClass(),attrs:{pattern:a.oldEmail.pattern,id:"old-email",placeholder:"输入旧邮箱",required:"",type:"text"},domProps:{value:a.oldEmail.value},on:{change:function(s){return a.oldEmail.check(s)},input:function(s){s.target.composing||a.$set(a.oldEmail,"value",s.target.value)}}}),s("div",{staticClass:"col align-self-center text-left",class:a.oldEmail.feedbackClass()},[a._v(" "+a._s(a.oldEmail.feedback)+" ")])]),s("div",{staticClass:"row mb-2"},[a._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:a.newEmail.value,expression:"newEmail.value"}],staticClass:"form-control col-4",class:a.newEmail.inputClass(),attrs:{pattern:a.newEmail.pattern,id:"new-email",placeholder:"输入新邮箱",required:"",type:"text"},domProps:{value:a.newEmail.value},on:{change:function(s){return a.newEmail.check(s)},input:function(s){s.target.composing||a.$set(a.newEmail,"value",s.target.value)}}}),s("div",{staticClass:"col align-self-center text-left",class:a.newEmail.feedbackClass()},[a._v(" "+a._s(a.newEmail.feedback)+" ")])]),s("div",{staticClass:"row pt-2"},[s("div",{staticClass:"col-2"}),s("input",{staticClass:"btn btn-danger col-2",class:a.emailSubmit.inputClass(),attrs:{id:"email-submit",type:"submit"},domProps:{value:a.user.email?"修改邮箱":"设置邮箱"}}),s("div",{staticClass:"col align-self-center text-left",class:a.emailSubmit.feedbackClass()},[a._v(" "+a._s(a.emailSubmit.feedback)+" ")])])])])]),s("div",{staticClass:"profile-item"},[s("div",{staticClass:"profile-item"},[a._m(2),s("div",{staticClass:"collapse pt-2",attrs:{id:"collapsePassword"}},[s("form",{staticClass:"card card-body",attrs:{id:"password-form",novalidate:""},on:{submit:function(s){return s.preventDefault(),a.updatePassword.apply(null,arguments)}}},[s("div",{staticClass:"row mb-2"},[a._m(3),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:a.oldPass.value,expression:"oldPass.value",modifiers:{lazy:!0}}],staticClass:"form-control col-4",class:a.oldPass.inputClass(),attrs:{pattern:a.oldPass.pattern,id:"old-password",placeholder:"输入旧密码",required:"",type:"password"},domProps:{value:a.oldPass.value},on:{change:[function(s){return a.$set(a.oldPass,"value",s.target.value)},function(s){return a.oldPass.check(s)}]}}),s("div",{staticClass:"col align-self-center text-left",class:a.oldPass.feedbackClass()},[a._v(" "+a._s(a.oldPass.feedback)+" ")])]),s("div",{staticClass:"row mb-2"},[a._m(4),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:a.newPass.value,expression:"newPass.value",modifiers:{lazy:!0}}],staticClass:"form-control col-4",class:a.newPass.inputClass(),attrs:{pattern:a.newPass.pattern,id:"new-password",placeholder:"输入新密码",required:"",type:"password"},domProps:{value:a.newPass.value},on:{change:[function(s){return a.$set(a.newPass,"value",s.target.value)},a.checkNewPass]}}),s("div",{staticClass:"col align-self-center text-left",class:a.newPass.feedbackClass()},[a._v(" "+a._s(a.newPass.feedback)+" ")])]),s("div",{staticClass:"row mb-2"},[a._m(5),s("input",{directives:[{name:"model",rawName:"v-model",value:a.repeatPass.value,expression:"repeatPass.value"}],staticClass:"form-control col-4",class:a.repeatPass.inputClass(),attrs:{pattern:a.repeatPass.pattern,id:"repeat-password",placeholder:"重复新密码",required:"",type:"password"},domProps:{value:a.repeatPass.value},on:{change:a.checkRepeatPass,input:function(s){s.target.composing||a.$set(a.repeatPass,"value",s.target.value)}}}),s("div",{staticClass:"col align-self-center text-left",class:a.repeatPass.feedbackClass()},[a._v(" "+a._s(a.repeatPass.feedback)+" ")])]),s("div",{staticClass:"row pt-2"},[s("div",{staticClass:"col-2"}),s("input",{staticClass:"btn btn-danger col-2",class:a.passSubmit.inputClass(),attrs:{type:"submit",value:"修改密码"}}),s("div",{staticClass:"col align-self-center text-left",class:a.passSubmit.feedbackClass()},[a._v(" "+a._s(a.passSubmit.feedback)+" ")])])])])])])])],1)},l=[function(){var a=this,s=a._self._c;return s("div",{staticClass:"col-2 text-right align-self-center"},[s("label",{attrs:{for:"old-email"}},[a._v("旧邮箱: ")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"col-2 text-right align-self-center"},[s("label",{attrs:{for:"new-email"}},[a._v("新邮箱: ")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"profile-btn"},[s("a",{attrs:{"aria-expanded":"false","data-target":"#collapsePassword","data-toggle":"collapse",href:"#"}},[a._v("修改密码")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"col-2 text-right align-self-center"},[s("label",{attrs:{for:"old-password"}},[a._v("旧密码: ")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"col-2 text-right align-self-center"},[s("label",{attrs:{for:"new-password"}},[a._v("新密码: ")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"col-2 text-right align-self-center"},[s("label",{attrs:{for:"repeat-password"}},[a._v("重复密码: ")])])}],i=e("5530"),n=(e("14d9"),e("59ae")),r=e("2f62"),o=e("f183"),c=e("fa7d"),d=e("c24f"),u={name:"profileSafety",components:{SidebarProfile:n["a"]},data:function(){return{oldEmail:new o["a"],newEmail:new o["a"],emailSubmit:new o["d"],oldPass:new o["b"]("","密码格式错误"),newPass:new o["b"]("","密码格式错误"),repeatPass:new o["b"]("","密码格式错误"),passSubmit:new o["d"]}},computed:Object(i["a"])({},Object(r["c"])(["user"])),created:function(){document.title="安全设置 - ".concat(this.user.username)},methods:{checkNewPass:function(a){this.oldPass.value===this.newPass.value?this.newPass.invalid("新旧密码相同"):this.newPass.check(a)},checkRepeatPass:function(a){this.repeatPass.value!==this.newPass.value?this.repeatPass.invalid("两次密码不同"):this.repeatPass.check(a)},updateEmail:function(){var a=this;this.oldEmail.isValid&&this.newEmail.isValid&&(this.oldEmail.value===this.newEmail.value?this.emailSubmit.invalid("两次邮箱相同"):Object(d["c"])({oldEmail:this.oldEmail.value,newEmail:this.newEmail.value}).then((function(s){a.emailSubmit.valid(s),a.$store.commit("UPDATE_USER",{email:Object(c["e"])(a.newEmail.value)}),console.log(a.user)})).catch((function(s){a.emailSubmit.invalid(s)})))},updatePassword:function(){var a=this;this.oldPass.isValid&&this.newPass.isValid&&this.repeatPass.isValid&&Object(d["d"])({oldPass:this.oldPass.value,newPass:this.newPass.value}).then((function(s){a.passSubmit.valid(s),alert("密码修改成功，请重新登陆"),a.$store.dispatch("Logout").then((function(){a.$router.push("/login")}))})).catch((function(s){a.passSubmit.invalid(s)}))}}},m=u,v=(e("783f"),e("2877")),p=Object(v["a"])(m,t,l,!1,null,"0edb1d2a",null);s["default"]=p.exports},"59ae":function(a,s,e){"use strict";var t=function(){var a=this,s=a._self._c;return s("div",{staticClass:"col-2 mt-lg-1"},[s("ul",{staticClass:"nav flex-column text-center nav-pills bg-gray border"},[s("li",{staticClass:"nav-item list-group-item-action mt-2 mb-2 border-bottom"},[s("router-link",{staticClass:"nav-link",class:{active:"Profile"===a.url},attrs:{to:"/user/profile"}},[a._v(" 基本信息 ")])],1),s("li",{staticClass:"nav-item list-group-item-action mt-2 mb-2"},[s("router-link",{staticClass:"nav-link",class:{active:"ProfileSafety"===a.url},attrs:{to:"/user/profile/safety"}},[a._v(" 账号安全 ")])],1)])])},l=[],i=(e("b0c0"),{name:"SidebarProfile",computed:{url:function(){return this.$route.name}}}),n=i,r=e("2877"),o=Object(r["a"])(n,t,l,!1,null,"2c49d031",null);s["a"]=o.exports},"783f":function(a,s,e){"use strict";e("8139")},8139:function(a,s,e){}}]);
//# sourceMappingURL=chunk-76ed56e5.bea68782.js.map