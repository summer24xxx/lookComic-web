(function(t){function e(e){for(var a,r,c=e[0],o=e[1],u=e[2],l=0,d=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);f&&f(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i={app:0},s=[];function c(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-0c191db2":"0eb5732c","chunk-0ee6b498":"303949ec","chunk-1af62554":"ca8d4062","chunk-2995f739":"06237ecd","chunk-2d0b309a":"0ca8c33d","chunk-2d0e2c36":"df768654","chunk-2d2304b4":"70631fbe","chunk-347a6126":"331cdf39","chunk-4843e56c":"95f3e03d","chunk-48593ac1":"fb4a43cc","chunk-49a670a6":"31403198","chunk-4f22d349":"6266507b","chunk-5a5d0458":"32bc6b41","chunk-617d0cde":"ded1cf94","chunk-76ed56e5":"bea68782","chunk-775620f2":"32fd3bba","chunk-b27e9f60":"caf6615c","chunk-d143eeee":"643f932a"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n={"chunk-0c191db2":1,"chunk-1af62554":1,"chunk-2995f739":1,"chunk-347a6126":1,"chunk-49a670a6":1,"chunk-4f22d349":1,"chunk-5a5d0458":1,"chunk-76ed56e5":1,"chunk-775620f2":1,"chunk-b27e9f60":1,"chunk-d143eeee":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-0c191db2":"477ddfb1","chunk-0ee6b498":"31d6cfe0","chunk-1af62554":"f1b1f994","chunk-2995f739":"8fda1960","chunk-2d0b309a":"31d6cfe0","chunk-2d0e2c36":"31d6cfe0","chunk-2d2304b4":"31d6cfe0","chunk-347a6126":"da9c2f39","chunk-4843e56c":"31d6cfe0","chunk-48593ac1":"31d6cfe0","chunk-49a670a6":"477ddfb1","chunk-4f22d349":"c97047cc","chunk-5a5d0458":"477ddfb1","chunk-617d0cde":"31d6cfe0","chunk-76ed56e5":"db7dc773","chunk-775620f2":"613b81b2","chunk-b27e9f60":"e4d0499f","chunk-d143eeee":"599a913b"}[t]+".css",i=o.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===i))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===a||l===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[t],f.parentNode.removeChild(f),n(s)},f.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=c(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}i[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0e6f":function(t,e,n){},"0fb9":function(t,e,n){},1:function(t,e){},"215c":function(t,e,n){},3234:function(t,e,n){"use strict";n("215c")},3786:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l}));n("d3b7");var a=n("4360"),r="token",i=function(){return localStorage.getItem(r)},s=function(t){return localStorage.setItem(r,t)},c=function(){return localStorage.removeItem(r)},o=function(t){return a["a"].getters.roles&&a["a"].getters.roles.some((function(e){return e.authority===t}))},u=function(){return a["a"].getters.user.username},l=function(){return a["a"].getters.token&&!a["a"].getters.user.username}},"3f98":function(t,e,n){},4360:function(t,e,n){"use strict";var a=n("a026"),r=n("2f62"),i=(n("e9c4"),n("b64b"),n("d3b7"),n("498a"),n("4ec3")),s=function(t){return Object(i["a"])("/api/login",t)},c=function(t){return Object(i["a"])("/api/register",t)},o=function(){return i["e"].get("/api/user/info")},u=n("3786"),l={state:{token:Object(u["a"])(),user:sessionStorage.user?JSON.parse(sessionStorage.user):{}},mutations:{SET_TOKEN:function(t,e){t.token=e,Object(u["f"])(e)},SET_USER:function(t,e){t.user=e,sessionStorage.user=JSON.stringify(e)},UPDATE_USER:function(t,e){Object.assign(t.user,e),sessionStorage.user=JSON.stringify(t.user)},CLEAR_INFO:function(t){t.token="",t.user={},Object(u["e"])(),sessionStorage.removeItem("user")}},actions:{Login:function(t,e){var n=t.commit;return e.username=e.username.trim(),new Promise((function(t,a){s(e).then((function(e){n("SET_USER",e),t()})).catch((function(t){a(t)}))}))},Register:function(t,e){var n=t.commit;return e.username=e.username.trim(),e.nickName=e.nickName.trim(),new Promise((function(t,a){c(e).then((function(){n("CLEAR_INFO"),t()})).catch((function(t){a(t)}))}))},GetInfo:function(t){var e=t.commit;return new Promise((function(t,n){o().then((function(n){e("SET_USER",n),t()})).catch((function(t){n(t)}))}))},Logout:function(t){var e=t.commit;return new Promise((function(t){e("CLEAR_INFO"),t()}))}}},d=l,f=(n("14d9"),n("a18c")),h={state:{chapter:null,prevChapter:null,nextChapter:null,currentPage:1},mutations:{INIT:function(t,e){t.chapter=e.chapter,t.prevChapter=e.prevChapter,t.nextChapter=e.nextChapter,t.currentPage=f["a"].currentRoute.query.page?parseInt(f["a"].currentRoute.query.page):1},GOTO_PAGE:function(t,e){t.currentPage=e},PREV_PAGE:function(t){t.currentPage>1&&(t.currentPage-=1)},NEXT_PAGE:function(t){t.currentPage<t.chapter.pages&&(t.currentPage+=1)},PREV_CHAPTER:function(t){t.currentPage=1,f["a"].push("/chapter/"+t.prevChapter)},NEXT_CHAPTER:function(t){t.currentPage=1,f["a"].push("/chapter/"+t.nextChapter)}},actions:{SyncRecord:function(t,e){var n=t.state;if(Object(u["c"])()){var a=b.getters.user;Object(i["d"])("/api/record/update",{user:{id:a.id,username:a.username},comic:n.chapter.comic,chapter:n.chapter,page:String(e),suffix:n.chapter.suffix})}},PrevChapter:function(t,e){var n=t.dispatch,a=t.commit;a("PREV_CHAPTER"),n("SyncRecord",e)},NextChapter:function(t,e){var n=t.dispatch,a=t.commit;a("NEXT_CHAPTER"),n("SyncRecord",e)}}},p=h,m={token:function(t){return t.user.token},user:function(t){return t.user.user},roles:function(t){return t.user.user.authorities},chapter:function(t){return t.chapter.chapter},prevChapter:function(t){return t.chapter.prevChapter},nextChapter:function(t){return t.chapter.nextChapter},currentPage:function(t){return t.chapter.currentPage}},v=m;a["a"].use(r["a"]);var b=e["a"]=new r["a"].Store({modules:{user:d,chapter:p},getters:v})},"4a4d":function(t,e,n){"use strict";(function(t){var a=n("b85c"),r=(n("7db0"),n("14d9"),n("a434"),n("e9c4"),n("b64b"),n("d3b7"),n("ac1f"),n("841c"),n("2ca0"),n("498a"),n("4ec3")),i=n("fa7d");e["a"]={name:"SearchTip",data:function(){return{showTips:!1,inputTxt:"",isComic:!1,tipsWidth:0,localTipsData:void 0===localStorage.searchTips?[]:JSON.parse(localStorage.searchTips),localTipsCount:0,data:[],text:"",nowTip:null}},mounted:function(){var e=this;this.component=t("#search-tips-component"),this.input=t("#search");var n=!1;this.input.on("compositionstart",(function(){n=!0})),this.input.on("compositionend",(function(){n=!1,null!=e.nowTip&&(e.nowTip.removeClass("hover"),e.nowTip=null);var t=e.inputTxt.trim();t.length!==e.text.length&&(e.text=t,e.search())})),this.input.on("input",(function(){n||(null!=e.nowTip&&(e.nowTip.removeClass("hover"),e.nowTip=null),setTimeout((function(){var t=e.inputTxt.trim();Math.abs(t.length-e.text.length)>1&&(e.text=t,e.search())}),500))})),this.input.on("keydown",(function(n){switch(n.keyCode){case 9:n.preventDefault();var a=t.Event("keydown",{keyCode:40});e.input.trigger(a);break;case 27:e.hide(),e.input.blur();break;case 13:var r=e.inputTxt.trim();r.length>0&&(null!=e.nowTip?e.nowTip.click():e.clickEvent("keyword",r),e.input.blur());break;case 38:e.nowTip&&e.nowTip.length>0&&e.nowTip.removeClass("hover"),e.nowTip=e.nowTip.prev("li"),e.nowTip.addClass("hover"),e.inputTxt=e.nowTip.text().trim();break;case 40:null==e.nowTip||0===e.nowTip.length?e.nowTip=e.component.find("li").eq(0):(e.nowTip.removeClass("hover"),e.nowTip=e.nowTip.next("li")),e.nowTip.addClass("hover"),e.inputTxt=e.nowTip.text().trim();break}}))},methods:{show:function(){var e=this;t(document).on("mousedown.a",(function(n){t.contains(e.component.get(0),n.target)||e.hide()})),this.search(),this.showTips=!0,this.tipsWidth=this.input.outerWidth()+"px"},hide:function(){this.showTips=!1,this.nowTip=null,t(document).off("mousedown.a")},search:function(){var t=this,e=""===this.text?{}:{keyword:this.text};r["e"].get("/api/esComic/search/simple",{params:e}).then((function(e){console.log(e),t.isComic=e.keyword,t.data=e.data})).catch((function(t){console.log(t)}))},filterLocalTips:function(){var t,e=[],n=Object(a["a"])(this.localTipsData);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.startsWith(this.text)&&e.push(r),3===e.length)break}}catch(i){n.e(i)}finally{n.f()}return this.localTipsCount=e.length,e},tipsHint:function(t){return Object(i["d"])(t,this.text.toLowerCase())},saveRecord:function(t){var e=this.localTipsData.indexOf(t);-1!==e?this.localTipsData.length>1&&(this.localTipsData.splice(e,1),this.localTipsData.unshift(t)):(this.localTipsData.length>=20&&this.localTipsData.pop(),this.localTipsData.unshift(t)),localStorage.searchTips=JSON.stringify(this.localTipsData)},clickEvent:function(t,e){var n=this;"tips"===t?this.isComic?this.$router.push("/comic/".concat(e.id)).then((function(){n.saveRecord(e.title)})).catch((function(){})):this.$router.push("/search?author=".concat(e)).then((function(){n.saveRecord(e)})).catch((function(){})):this.$router.push("/search?keyword=".concat(e)).then((function(){n.saveRecord(e)})).catch((function(){})),this.hide()}}}}).call(this,n("1157"))},"4d4f":function(t,e,n){},"4ec3":function(t,e,n){"use strict";n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return v}));n("caad"),n("e9c4"),n("d3b7"),n("ac1f"),n("5319");var a=n("bc3a"),r=n.n(a),i=n("4328"),s=n.n(i),c=n("4360"),o=n("a18c"),u=n("3786"),l="authorization",d=r.a.create({baseURL:"",timeout:15e3,headers:{}}),f=["/api/login","/api/register"];function h(t,e){return d.post(t,s.a.stringify(e))}function p(t,e){return d.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8"}})}function m(t,e){return d.put(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8"}})}function v(t,e){var n=new FormData;n.append("record",JSON.stringify(e)),n.append("Authorization",Object(u["a"])()),navigator.sendBeacon(t,n)}d.interceptors.request.use((function(t){return c["a"].getters.token&&!f.includes(t.url)&&(t.headers[l]=Object(u["a"])()),t}),(function(t){console.log(t)})),d.interceptors.response.use((function(t){var e=t.data;if(200!==e.code){if(console.log(e),401===e.code)c["a"].commit("CLEAR_INFO");else{if(403===e.code)return o["a"].replace("/403");if(404===e.code)return o["a"].replace("/404")}return Promise.reject(e.data)}var n=t.headers[l];return n&&c["a"].commit("SET_TOKEN",n),e.data}),(function(t){return console.log("something errors: "+t),Promise.reject(t)}))},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("a026"),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},i=[],s={name:"App",data:function(){return{}},components:{},methods:{}},c=s,o=(n("f29a"),n("2877")),u=Object(o["a"])(c,r,i,!1,null,null,null),l=u.exports,d=n("4360"),f=n("1157"),h=n.n(f),p=(n("ab8b"),n("3e48"),n("96b1"),n("a18c")),m=n("4ec3");a["a"].config.productionTip=!1,a["a"].prototype.postRequest=m["a"],a["a"].prototype.putRequest=m["c"],h()('[data-toggle="tooltip"]').tooltip(),p["a"].beforeEach((function(t,e,n){document.title=t.meta.title?t.meta.title:"加载中...",n()})),new a["a"]({render:function(t){return t(l)},store:d["a"],router:p["a"]}).$mount("#app")},"96b1":function(t,e,n){},a18c:function(t,e,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var a=n("a026"),r=n("8c4f"),i=function(){var t=this,e=t._self._c;return e("div",[e("nav-top"),e("div",{staticClass:"container-fluid"},[e("transition",{attrs:{mode:"out-in",name:"fade"}},[e("router-view")],1),e("Footer")],1)],1)},s=[],c=(n("2ca0"),function(){var t=this,e=t._self._c;return e("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bd-navbar bg-dark",attrs:{id:"nav-top"}},[t._m(0),e("div",{staticClass:"navbar-nav-scroll ml-4"},[e("ul",{staticClass:"navbar-nav bd-navbar-nav flex-row"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/category?categoryId=1"}},[t._v("分类")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/?orderBy=lastUpdate&asc=false"}},[t._v("最近更新")])],1)])]),e("div",{staticClass:"collapse navbar-collapse justify-content-end"},[e("ul",{staticClass:"navbar-nav account"},[e("li",{staticClass:"nav-item mr-2"},[e("search-tip")],1),t.isLogin()?e("li",{staticClass:"nav-item dropdown",attrs:{id:"logout"}},[e("a",{staticClass:"nav-link dropdown-toggle",attrs:{"aria-expanded":"false","aria-haspopup":"true","data-toggle":"dropdown",href:"#",id:"navbarDropdownMenuLink",role:"button"}},[t._v(" "+t._s(t.user.username)+" ")]),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdownMenuLink"}},[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/user/favourite"}},[t._v("我的订阅")]),e("router-link",{staticClass:"dropdown-item",attrs:{to:"/user/record"}},[t._v("历史记录")]),e("router-link",{staticClass:"dropdown-item",attrs:{to:"/user/profile"}},[t._v("设置")]),e("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:t.logout}},[t._v("登出")])],1)]):e("li",{staticClass:"nav-item login",attrs:{id:"login"}},[e("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[t._v("登陆")])],1),t.hasRole("ROLE_ADMIN")?e("li",{staticClass:"nav-item dropdown",attrs:{id:"comic-admin"}},[e("a",{staticClass:"nav-link dropdown-toggle",attrs:{"aria-expanded":"false","aria-haspopup":"true","data-toggle":"dropdown",href:"#",role:"button"}},[t._v(" 管理员 ")]),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdownMenuLink"}},[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/admin/comic/index"}},[t._v("漫画管理")]),e("router-link",{staticClass:"dropdown-item",attrs:{to:"/admin/account/index"}},[t._v("账号管理")])],1)]):t._e()])])])}),o=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"navbar-brand mr-2",attrs:{href:"/"}},[e("img",{staticClass:"d-inline-block align-top",attrs:{alt:"/favicon.ico",height:"30",src:"/favicon.ico",width:"30"}})])}],u=n("5530"),l=(n("14d9"),n("3786")),d=n("2f62"),f=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"search-tips-component"}},[e("label",{staticClass:"sr-only",attrs:{for:"search"}},[t._v("搜索")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputTxt,expression:"inputTxt"}],staticClass:"form-control",attrs:{id:"search",placeholder:"输入漫画或作者名称",type:"text"},domProps:{value:t.inputTxt},on:{focus:t.show,input:function(e){e.target.composing||(t.inputTxt=e.target.value)}}}),t.showTips?e("div",{staticClass:"mt-1",style:{width:t.tipsWidth},attrs:{id:"search-tips"}},[""===t.text?[e("div",{staticClass:"row text-muted pt-2 ml-2 mr-2 align-self-end border-bottom"},[t._v("热搜")]),e("ul",{staticClass:"remote-tips"},t._l(Math.min(6,t.data.length),(function(n){return e("li",{key:n,staticClass:"search-item pt-2 pl-2",on:{click:function(e){return t.clickEvent("tips",t.data[n-1])}}},[t._v(" "+t._s(t.isComic?t.data[n-1].title:t.data[n-1])+" ")])})),0),e("div",{staticClass:"row text-muted ml-2 mr-2 align-self-end border-bottom"},[t._v("本地记录")]),e("ul",{staticClass:"local-tips"},t._l(Math.min(5,t.localTipsData.length),(function(n){return e("li",{key:n,staticClass:"search-item pt-2 pl-2",on:{click:function(e){return t.clickEvent("keyword",t.localTipsData[n-1])}}},[t._v(" "+t._s(t.localTipsData[n-1])+" ")])})),0)]:[e("ul",{staticClass:"real-time-tips"},[t._l(t.filterLocalTips(),(function(n,a){return e("li",{key:a,staticClass:"search-item pt-2 pl-2",on:{click:function(e){return t.clickEvent("keyword",n)}}},[e("b",{staticClass:"text-primary"},[t._v(t._s(t.text))]),t._v(t._s(n.substring(t.text.length))+" ")])})),t._l(Math.min(10-t.localTipsCount,t.data.length),(function(n){return e("li",{key:n,staticClass:"search-item pt-2 pl-2",on:{click:function(e){return t.clickEvent("tips",t.data[n-1])}}},[t.data[0].title?t._l(t.tipsHint(t.data[n-1].title),(function(a,r){return e("span",{key:r},[a?e("b",[t._v(t._s(t.data[n-1].title[r]))]):[t._v(t._s(t.data[n-1].title[r]))]],2)})):t._l(t.tipsHint(t.data[n-1]),(function(a,r){return e("span",{key:r},[a?e("b",[t._v(t._s(t.data[n-1][r]))]):[t._v(t._s(t.data[n-1][r]))]],2)}))],2)}))],2)]],2):t._e()])},h=[],p=n("4a4d"),m=p["a"],v=(n("f89a"),n("2877")),b=Object(v["a"])(m,f,h,!1,null,"03409a07",null),g=b.exports,k={name:"NavTop",components:{SearchTip:g},data:function(){return{}},computed:Object(u["a"])({},Object(d["c"])(["user"])),methods:{hasRole:function(t){return Object(l["b"])(t)},isLogin:function(){return Object(l["c"])()},logout:function(){var t=this;this.$store.dispatch("Logout").then((function(){t.$route.meta.auth||t.$route.path.startsWith("/admin")?t.$router.push("/"):location.reload()}))}}},C=k,w=(n("b412"),Object(v["a"])(C,c,o,!1,null,"21310d36",null)),_=w.exports,y=function(){var t=this,e=t._self._c;return e("footer")},T=[],x={name:"Footer"},O=x,P=Object(v["a"])(O,y,T,!1,null,"0d284f33",null),j=P.exports,E=n("4360"),N=n("323e"),S=n.n(N);function R(t,e){return!(t.meta.auth&&!Object(l["c"])())||(e({path:"/401",replace:!0}),!1)}function A(t,e){return!(t.path.startsWith("/admin")&&!Object(l["b"])("ROLE_ADMIN"))||(e({path:"/403",replace:!0}),!1)}function L(t,e){Object(l["d"])()?(S.a.start(),E["a"].dispatch("GetInfo").then((function(){A(t,e)&&e(),S.a.done()})).catch((function(){R(t,e)&&A(t,e)&&e(),S.a.done()}))):R(t,e)&&A(t,e)&&e()}var D={name:"Layout",components:{Footer:j,NavTop:_},beforeRouteEnter:function(t,e,n){L(t,n)},beforeRouteUpdate:function(t,e,n){L(t,n)},methods:{preprocess:function(){}}},M=D,$=Object(v["a"])(M,i,s,!1,null,"64ff672f",null),V=$.exports,F=(n("99af"),n("fb6a"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center",attrs:{id:"login"}},[e("form",{staticClass:"form-signin",attrs:{method:"post",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submitEvent.apply(null,arguments)}}},[e("img",{staticClass:"mb-4",attrs:{alt:"/favicon.ico",height:"72",src:"/favicon.ico",width:"72"}}),e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("请登录")]),e("div",{staticClass:"row"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.username.value,expression:"username.value",modifiers:{lazy:!0}}],staticClass:"form-control col-6",class:t.username.inputClass(),attrs:{pattern:t.username.pattern,autofocus:"",id:"username",name:"username",placeholder:"用户名",required:"",type:"text"},domProps:{value:t.username.value},on:{change:[function(e){return t.$set(t.username,"value",e.target.value)},function(e){return t.username.check(e)}]}}),e("div",{staticClass:"col-3 align-self-center",class:t.username.feedbackClass()},[t._v(" "+t._s(t.username.feedback)+" ")])]),e("div",{staticClass:"row"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.password.value,expression:"password.value",modifiers:{lazy:!0}}],staticClass:"form-control col-6",class:t.password.inputClass(),attrs:{pattern:t.password.pattern,id:"password",name:"password",placeholder:"密码",required:"",type:"password"},domProps:{value:t.password.value},on:{change:[function(e){return t.$set(t.password,"value",e.target.value)},function(e){return t.password.check(e)}]}}),e("div",{staticClass:"col-3 align-self-center",class:t.password.feedbackClass()},[t._v(" "+t._s(t.password.feedback)+" ")])]),e("div",{staticClass:"checkbox mb-3"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rememberMe,expression:"rememberMe"}],staticClass:"mt-3",attrs:{name:"remember-me",type:"checkbox"},domProps:{checked:Array.isArray(t.rememberMe)?t._i(t.rememberMe,null)>-1:t.rememberMe},on:{change:function(e){var n=t.rememberMe,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=null,s=t._i(n,i);a.checked?s<0&&(t.rememberMe=n.concat([i])):s>-1&&(t.rememberMe=n.slice(0,s).concat(n.slice(s+1)))}else t.rememberMe=r}}}),t._v(" Remember me ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"}),e("button",{staticClass:"btn btn-lg btn-primary btn-block col-4",class:t.submit.inputClass(),attrs:{type:"submit"}},[t._v(" 登录 ")]),e("div",{staticClass:"col align-self-center text-left",class:t.submit.feedbackClass()},[t._v(" "+t._s(t.submit.feedback)+" ")])]),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-3"}),e("span",{staticClass:"col text-right"},[t._v("初次登陆？ "),e("router-link",{attrs:{to:"/register"}},[t._v("注册")])],1),e("div",{staticClass:"col-3"})])])])}),q=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-3"},[e("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("用户名")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-3"},[e("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("密码")])])}],I=n("f183"),z={name:"Login",data:function(){return{username:new I["c"](this.$route.query.username?this.$route.query.username:"luffy","用户名格式不合法"),password:new I["b"]("123456","密码长度应在6-16内"),submit:new I["d"],rememberMe:!0}},methods:{submitEvent:function(){var t=this;this.username.isValid&&this.password.isValid&&this.$store.dispatch("Login",{username:this.username.value,password:this.password.value,rememberMe:this.rememberMe}).then((function(){t.$router.push({path:"/"})})).catch((function(e){t.submit.invalid(e)}))}}},U=z,H=(n("aa5c"),Object(v["a"])(U,F,q,!1,null,"a8143d18",null)),J=H.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center",attrs:{id:"register"}},[e("form",{staticClass:"form-signin",attrs:{action:"#",method:"post",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submitEvent.apply(null,arguments)}}},[e("img",{staticClass:"mb-2",attrs:{alt:"/favicon.ico",height:"72",src:"/favicon.ico",width:"72"}}),e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("请注册")]),e("div",{staticClass:"row mb-2"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.username.value,expression:"username.value",modifiers:{lazy:!0}}],staticClass:"form-control col-4",class:t.username.inputClass(),attrs:{pattern:t.username.pattern,id:"username",name:"username",placeholder:"用户名",required:"",type:"text"},domProps:{value:t.username.value},on:{change:[function(e){return t.$set(t.username,"value",e.target.value)},t.checkUsername]}}),e("div",{staticClass:"col align-self-center text-left",class:t.username.feedbackClass()},[t._v(" "+t._s(t.username.feedback)+" ")])]),e("div",{staticClass:"row mb-2"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.nickName.value,expression:"nickName.value",modifiers:{lazy:!0}}],staticClass:"form-control col-4",class:t.nickName.inputClass(),attrs:{pattern:t.nickName.pattern,id:"nickName",name:"nickName",placeholder:"昵称",required:"",type:"text"},domProps:{value:t.nickName.value},on:{change:[function(e){return t.$set(t.nickName,"value",e.target.value)},function(e){return t.nickName.check(e)}]}}),e("div",{staticClass:"col align-self-center text-left",class:t.nickName.feedbackClass()},[t._v(" "+t._s(t.nickName.feedback)+" ")])]),e("div",{staticClass:"row mb-2"},[t._m(2),e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.email.value,expression:"email.value",modifiers:{lazy:!0}}],staticClass:"form-control col-4",class:t.email.inputClass(),attrs:{pattern:t.email.pattern,id:"email",name:"email",placeholder:"邮箱",required:"",type:"text"},domProps:{value:t.email.value},on:{change:[function(e){return t.$set(t.email,"value",e.target.value)},t.checkEmail]}}),e("div",{staticClass:"col align-self-center text-left",class:t.email.feedbackClass()},[t._v(" "+t._s(t.email.feedback)+" ")])]),e("div",{staticClass:"row mb-2"},[t._m(3),e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.password.value,expression:"password.value",modifiers:{lazy:!0}}],staticClass:"form-control col-4",class:t.password.inputClass(),attrs:{pattern:t.password.pattern,id:"password",name:"password",placeholder:"密码",required:"",type:"password"},domProps:{value:t.password.value},on:{change:[function(e){return t.$set(t.password,"value",e.target.value)},function(e){return t.password.check(e)}]}}),e("div",{staticClass:"col align-self-center text-left",class:t.password.feedbackClass()},[t._v(" "+t._s(t.password.feedback)+" ")])]),e("div",{staticClass:"row mb-2"},[t._m(4),e("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatPass.value,expression:"repeatPass.value"}],staticClass:"form-control col-4",class:t.repeatPass.inputClass(),attrs:{pattern:t.repeatPass.pattern,id:"repeat-password",placeholder:"重复密码",required:"",type:"password"},domProps:{value:t.repeatPass.value},on:{change:t.checkRepeatPass,input:function(e){e.target.composing||t.$set(t.repeatPass,"value",e.target.value)}}}),e("div",{staticClass:"col align-self-center text-left",class:t.repeatPass.feedbackClass()},[t._v(" "+t._s(t.repeatPass.feedback)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-5"}),e("button",{staticClass:"btn btn-lg btn-primary btn-block col-2",class:t.submit.inputClass(),attrs:{type:"submit"}},[t._v(" 注册 ")]),e("div",{staticClass:"col align-self-center text-left",class:t.submit.feedbackClass()},[t._v(" "+t._s(t.submit.feedback)+" ")])]),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-4"}),e("span",{staticClass:"col text-right"},[t._v("已有账号？"),e("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1),e("div",{staticClass:"col-4"})])])])},W=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-4"},[e("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("用户名")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-4"},[e("label",{staticClass:"sr-only",attrs:{for:"nickName"}},[t._v("昵称")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-4"},[e("label",{staticClass:"sr-only",attrs:{for:"email"}},[t._v("邮箱")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-4"},[e("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("密码")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-4"},[e("label",{staticClass:"sr-only",attrs:{for:"repeat-password"}},[t._v("重复密码")])])}],G=n("c24f"),K={name:"Register",data:function(){return{username:new I["c"],nickName:new I["c"],email:new I["a"],password:new I["b"],repeatPass:new I["b"],submit:new I["d"]("","请完善注册信息")}},methods:{checkUsername:function(t){var e=this;this.username.check(t),this.username.isValid&&Object(G["b"])(this.username.value).then((function(t){t?e.username.invalid("用户名已存在"):e.username.valid()})).catch((function(){e.username.invalid("服务器连接失败")}))},checkEmail:function(t){var e=this;t.target.checkValidity()?Object(G["a"])(this.email.value).then((function(t){t?e.email.invalid("邮箱已注册"):e.email.valid()})).catch((function(){e.email.invalid("服务器连接失败")})):this.email.invalid()},checkRepeatPass:function(t){t.target.checkValidity()?this.repeatPass.value!==this.password.value?this.repeatPass.invalid("两次输入密码不同"):this.repeatPass.valid():this.repeatPass.invalid()},submitEvent:function(){var t=this;this.username.isValid&&this.nickName.isValid&&this.email.isValid&&this.password.isValid&&this.repeatPass.isValid?this.$store.dispatch("Register",{username:this.username.value,nickName:this.nickName.value,email:this.email.value,password:this.password.value}).then((function(e){t.submit.valid(e),t.$router.push({path:"/login",query:{username:t.username.value}})})).catch((function(e){t.submit.invalid(e)})):this.submit.invalid()}}},X=K,Z=(n("3234"),Object(v["a"])(X,B,W,!1,null,"286446d6",null)),Q=Z.exports;a["a"].use(r["a"]);e["a"]=new r["a"]({mode:"history",routes:[{path:"/login",name:"Login",component:J,meta:{title:"登陆"}},{path:"/register",name:"Register",component:Q,meta:{title:"注册"}},{path:"/",component:V,children:[{path:"",name:"home",component:function(){return n.e("chunk-49a670a6").then(n.bind(null,"bb51"))},meta:{title:"主页"}},{path:"comic/:id",name:"Comic",component:function(){return n.e("chunk-b27e9f60").then(n.bind(null,"0c22"))}},{path:"chapter/:id",name:"Chapter",component:function(){return n.e("chunk-d143eeee").then(n.bind(null,"d18d"))}},{path:"category",name:"Category",component:function(){return n.e("chunk-347a6126").then(n.bind(null,"a192"))}},{path:"search",name:"Search",component:function(){return n.e("chunk-5a5d0458").then(n.bind(null,"efe3"))}}]},{path:"/user",component:V,redirect:"/user/favourite",children:[{path:"profile",name:"Profile",component:function(){return n.e("chunk-1af62554").then(n.bind(null,"a1ec"))},meta:{auth:!0}},{path:"profile/safety",name:"ProfileSafety",component:function(){return n.e("chunk-76ed56e5").then(n.bind(null,"1fc2"))},meta:{auth:!0}},{path:"favourite",name:"Favourite",component:function(){return n.e("chunk-2995f739").then(n.bind(null,"4cfd"))},meta:{auth:!0}},{path:"record",name:"record",component:function(){return n.e("chunk-4f22d349").then(n.bind(null,"3883"))},meta:{auth:!0}},{path:":id",redirect:"/user/:id/favourite"},{path:":id/favourite",name:"OtherFavourite",component:function(){return n.e("chunk-0c191db2").then(n.bind(null,"2216"))}}]},{path:"/admin",component:V,children:[{path:"account/index",name:"Account",component:function(){return n.e("chunk-0ee6b498").then(n.bind(null,"c688"))},meta:{title:"用户管理"}},{path:"comic/index",name:"AdminComicLocal",component:function(){return n.e("chunk-48593ac1").then(n.bind(null,"f42e"))},meta:{title:"漫画管理"}},{path:"comic/addList",name:"ComicLocal",component:function(){return n.e("chunk-775620f2").then(n.bind(null,"78ab"))},meta:{title:"本地漫画"}},{path:"comic/:id",name:"AdminComic",component:function(){return n.e("chunk-4843e56c").then(n.bind(null,"767d"))}},{path:"comic/:id/addList",name:"AdminChapterLocal",component:function(){return n.e("chunk-617d0cde").then(n.bind(null,"dae2"))}}]},{path:"",component:V,children:[{path:"401",name:"Unauthorized",component:function(){return n.e("chunk-2d2304b4").then(n.bind(null,"ec55"))},meta:{title:"未登录"}},{path:"403",name:"Forbidden",component:function(){return n.e("chunk-2d0e2c36").then(n.bind(null,"7fa2"))},meta:{title:"没有权限"}},{path:"404",name:"NotFound",component:function(){return n.e("chunk-2d0b309a").then(n.bind(null,"2754"))},meta:{title:"页面不存在"}},{path:"*",redirect:"/404"}]}]})},aa5c:function(t,e,n){"use strict";n("4d4f")},b412:function(t,e,n){"use strict";n("0e6f")},c24f:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return o}));var a=n("4ec3"),r=function(t){return a["e"].get("/api/hasUsername?username=".concat(t))},i=function(t){return a["e"].get("/api/hasEmail?email=".concat(t))},s=function(t){return Object(a["b"])("/api/user/profile/update",t)},c=function(t){return Object(a["a"])("/api/user/profile/updateEmail",t)},o=function(t){return Object(a["a"])("/api/user/profile/updatePass",t)}},f183:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d}));var a=n("8f33"),r=n("262e"),i=n("d4ec"),s=n("bee2"),c=n("fa7d"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(i["a"])(this,t),this.value=e,this.validFeedback=a,this.invalidFeedback=n,this.pattern=r,this.feedback="",this.isValid=!(""===e||!e)||null}return Object(s["a"])(t,[{key:"valid",value:function(t){this.isValid=!0,this.feedback=t||this.validFeedback}},{key:"invalid",value:function(t){this.isValid=!1,this.feedback=t||this.invalidFeedback}},{key:"validate",value:function(t,e){t?this.valid():this.invalid(e)}},{key:"check",value:function(t){this.validate(t.target.checkValidity())}},{key:"inputClass",value:function(){return{"is-valid":this.isValid,"is-invalid":!1===this.isValid}}},{key:"feedbackClass",value:function(){return{"valid-feedback":this.isValid,"invalid-feedback":!this.isValid}}}])}(),u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"由4-16个字符内的字母中文或数字组成",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(i["a"])(this,e),Object(a["a"])(this,e,[t,n,r,"^(?![0-9_])[a-zA-Z0-9_一-龥]{2,16}$"])}return Object(r["a"])(e,t),Object(s["a"])(e,[{key:"check",value:function(t){this.validate(t.target.checkValidity()&&Object(c["a"])(this.value))}}])}(o),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"邮箱格式不合法",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(i["a"])(this,e),Object(a["a"])(this,e,[t,n,r,"^[\\w一-龥]+@\\w+\\.\\w+$"])}return Object(r["a"])(e,t),Object(s["a"])(e)}(o),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"由长度6-16内的字母、数字或特殊字符组成",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(i["a"])(this,e),Object(a["a"])(this,e,[t,n,r,"^[!-~]{6,16}$"])}return Object(r["a"])(e,t),Object(s["a"])(e)}(o);e["d"]=o},f29a:function(t,e,n){"use strict";n("0fb9")},f89a:function(t,e,n){"use strict";n("3f98")},fa7d:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return c}));n("14d9"),n("a9e3"),n("d3b7"),n("ac1f"),n("00b4"),n("25f0"),n("841c");function a(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,a=t.length,r=0,i=0;i<a;i++)t.charCodeAt(i)<256?r++:r+=2;return r>=e&&r<=n}function r(t){var e=new Date(t);return e.toLocaleDateString()+" "+e.getHours()+":"+e.getMinutes()}function i(t){return t.substring(0,2)+"***"+t.substring(t.indexOf("@"))}function s(t,e){for(var n=[],a=0;a<=t.length;a++){for(var r=[],i=0;i<=e.length;i++)r.push(0);n.push(r)}for(var s=1;s<=t.length;s++)for(var c=1;c<=e.length;c++)t[s-1]===e[c-1]?n[s][c]=n[s-1][c-1]+1:n[s][c]=Math.max(n[s-1][c],n[s][c-1]);var o=t.length,u=e.length,l=[];while(o>=1&&u>=1)t[o-1]===e[u-1]?(l.push(t[o-1]),o--,u--):n[o][u-1]>n[o-1][u]?u--:o--;l.reverse();for(var d=[],f=0,h=0;h<t.length;h++)t[h]===l[f]?(f++,d[h]=!0):d[h]=!1;return d}function c(){return/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)}Number.prototype.format=function(t){for(var e=this.toString(),n=e.length,a="",r=0;r<t-n;r++)a+="0";return a+e}}});
//# sourceMappingURL=app.3975c612.js.map