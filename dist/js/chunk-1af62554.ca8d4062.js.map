{"version":3,"sources":["webpack:///./src/components/Sidebar/SidebarProfile.vue","webpack:///src/components/Sidebar/SidebarProfile.vue","webpack:///./src/components/Sidebar/SidebarProfile.vue?bc65","webpack:///./src/components/Sidebar/SidebarProfile.vue?3f09","webpack:///./src/views/user/profile/profile.vue","webpack:///src/views/user/profile/profile.vue","webpack:///./src/views/user/profile/profile.vue?6679","webpack:///./src/views/user/profile/profile.vue?7505","webpack:///./src/views/user/profile/profile.vue?6db4"],"names":["render","_vm","this","_c","_self","staticClass","class","active","url","attrs","_v","staticRenderFns","name","computed","$route","component","on","$event","preventDefault","submitEvent","apply","arguments","_m","_s","user","username","directives","rawName","value","nickNameValue","expression","nickName","inputClass","pattern","domProps","target","composing","checkNickname","feedbackClass","feedback","icon","note","submit","components","SidebarProfile","data","UsernameParam","store","getters","ValidatorParam","_objectSpread","mapGetters","created","document","title","concat","isValid","methods","event","validate","checkValidity","checkLength","checkNote","_this","updateProfile","then","resp","valid","$store","commit","catch","error","invalid"],"mappings":"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","file":"js/chunk-1af62554.ca8d4062.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 mt-lg-1\"},[_c('ul',{staticClass:\"nav flex-column text-center nav-pills bg-gray border\"},[_c('li',{staticClass:\"nav-item list-group-item-action mt-2 mb-2 border-bottom\"},[_c('router-link',{staticClass:\"nav-link\",class:{active: _vm.url === 'Profile'},attrs:{\"to\":\"/user/profile\"}},[_vm._v(\" 基本信息 \")])],1),_c('li',{staticClass:\"nav-item list-group-item-action mt-2 mb-2\"},[_c('router-link',{staticClass:\"nav-link\",class:{active: _vm.url === 'ProfileSafety'},attrs:{\"to\":\"/user/profile/safety\"}},[_vm._v(\" 账号安全 \")])],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"col-2 mt-lg-1\">\n    <ul class=\"nav flex-column text-center nav-pills bg-gray border\">\n      <li class=\"nav-item list-group-item-action mt-2 mb-2 border-bottom\">\n        <router-link :class=\"{active: url === 'Profile'}\" class=\"nav-link\"\n                     to=\"/user/profile\">\n          基本信息\n        </router-link>\n      </li>\n      <li class=\"nav-item list-group-item-action mt-2 mb-2\">\n        <router-link :class=\"{active: url === 'ProfileSafety'}\" class=\"nav-link\"\n                     to=\"/user/profile/safety\">\n          账号安全\n        </router-link>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"SidebarProfile\",\n\n    computed: {\n      url() {\n        return this.$route.name\n      }\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidebarProfile.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidebarProfile.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SidebarProfile.vue?vue&type=template&id=2c49d031&scoped=true\"\nimport script from \"./SidebarProfile.vue?vue&type=script&lang=js\"\nexport * from \"./SidebarProfile.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c49d031\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row justify-content-center\"},[_c('sidebar-profile'),_c('form',{staticClass:\"profile mt-lg-1 col-6\",attrs:{\"action\":\"#\",\"method\":\"post\",\"novalidate\":\"\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitEvent.apply(null, arguments)}}},[_c('div',{staticClass:\"profile-item row\"},[_vm._m(0),_c('div',{staticClass:\"text-muted col\"},[_vm._v(\" \"+_vm._s(_vm.user.username)+\" \")])]),_c('div',{staticClass:\"profile-item row\"},[_vm._m(1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.nickNameValue),expression:\"nickNameValue\"}],staticClass:\"form-control col-4\",class:_vm.nickName.inputClass(),attrs:{\"pattern\":_vm.nickName.pattern,\"placeholder\":_vm.nickName.value ? _vm.nickName.value :'无',\"id\":\"nickName\",\"name\":\"nickName\",\"type\":\"text\"},domProps:{\"value\":(_vm.nickNameValue)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.nickNameValue=$event.target.value},_vm.checkNickname]}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.nickName.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.nickName.feedback)+\" \")])]),_c('div',{staticClass:\"profile-item row\"},[_vm._m(2),_c('div',{staticClass:\"col\"},[_c('span',{staticClass:\"text-muted\"},[_vm._v(\" \"+_vm._s(_vm.user.icon ? _vm.user.icon : '未设置')+\" \")])])]),_c('div',{staticClass:\"profile-item row\"},[_vm._m(3),_c('div',{staticClass:\"col\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.note),expression:\"note\"}],staticClass:\"border rounded\",attrs:{\"placeholder\":_vm.note ? '' : '无',\"autocomplete\":\"off\",\"id\":\"note\",\"maxlength\":\"500\",\"name\":\"note\",\"rows\":\"2\"},domProps:{\"value\":(_vm.note)},on:{\"input\":function($event){if($event.target.composing)return;_vm.note=$event.target.value}}})])]),_c('div',{staticClass:\"profile-item row\"},[_c('div',{staticClass:\"col-2\"}),_c('input',{staticClass:\"btn btn-danger\",class:_vm.submit.inputClass(),attrs:{\"type\":\"submit\",\"value\":\"保存\"}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.submit.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.submit.feedback)+\" \")])])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right\"},[_c('label',[_vm._v(\"用户名: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right align-self-center\"},[_c('label',{attrs:{\"for\":\"nickName\"}},[_vm._v(\"昵称: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right\"},[_c('label',{attrs:{\"for\":\"note\"}},[_vm._v(\"头像: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right align-self-center\"},[_c('label',{attrs:{\"for\":\"note\"}},[_vm._v(\"我的签名: \")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"row justify-content-center\">\n    <sidebar-profile></sidebar-profile>\n    <form @submit.prevent=\"submitEvent\" action=\"#\" class=\"profile mt-lg-1 col-6\" method=\"post\" novalidate>\n      <div class=\"profile-item row\">\n        <div class=\"col-2 text-right\">\n          <label>用户名: </label>\n        </div>\n        <div class=\"text-muted col\">\n          {{ user.username }}\n        </div>\n      </div>\n      <div class=\"profile-item row\">\n        <div class=\"col-2 text-right align-self-center\">\n          <label for=\"nickName\">昵称: </label>\n        </div>\n        <input :class=\"nickName.inputClass()\" :pattern=\"nickName.pattern\" :placeholder=\"nickName.value ? nickName.value :'无'\"\n               @input=\"checkNickname\" class=\"form-control col-4\"\n               id=\"nickName\"\n               name=\"nickName\" type=\"text\" v-model=\"nickNameValue\">\n        <div :class=\"nickName.feedbackClass()\"\n             class=\"col align-self-center text-left\">\n          {{ nickName.feedback }}\n        </div>\n      </div>\n      <div class=\"profile-item row\">\n        <div class=\"col-2 text-right\">\n          <label for=\"note\">头像: </label>\n        </div>\n        <div class=\"col\">\n          <span class=\"text-muted\">\n            {{ user.icon ? user.icon : '未设置'}}\n          </span>\n        </div>\n      </div>\n      <div class=\"profile-item row\">\n        <div class=\"col-2 text-right align-self-center\">\n          <label for=\"note\">我的签名: </label>\n        </div>\n        <div class=\"col\">\n          <textarea :placeholder=\"note ? '' : '无'\" autocomplete=\"off\"\n                    class=\"border rounded\" id=\"note\" maxlength=\"500\" name=\"note\"\n                    rows=\"2\"\n                    v-model=\"note\"></textarea>\n        </div>\n      </div>\n      <div class=\"profile-item row\">\n        <div class=\"col-2\"></div>\n        <input :class=\"submit.inputClass()\"\n               class=\"btn btn-danger\"\n                type=\"submit\" value=\"保存\">\n        <div :class=\"submit.feedbackClass()\"\n             class=\"col align-self-center text-left\">\n          {{ submit.feedback }}\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\n  import {mapGetters} from \"vuex\";\n  import SidebarProfile from \"@/components/Sidebar/SidebarProfile\";\n  import ValidatorParam, {UsernameParam} from \"@/utils/ValidatorParam\";\n  import {checkLength} from \"@/utils/utils\";\n  import store from \"@/store\"\n  import {updateProfile} from \"@/api/user\";\n\n  export default {\n    name: \"Profile\",\n    components: {SidebarProfile},\n    data() {\n      return {\n        nickNameValue: '', // 初始值应为空，placeholder应为nikeName旧值，所以单独提出来\n        nickName: new UsernameParam(store.getters.user.nickName),\n        submit: new ValidatorParam(),\n        note: store.getters.user.note\n      }\n    },\n\n    computed: {\n      ...mapGetters([\n        'user',\n      ]),\n    },\n\n    created() {\n      document.title = `设置 - ${this.user.username}`;\n      this.nickName.isValid = null\n    },\n\n    methods: {\n      // eslint-disable-next-line no-unused-vars\n      checkNickname(event) {\n        if (this.nickNameValue !== '') {\n          this.nickName.validate(event.target.checkValidity() && checkLength(this.nickNameValue));\n        } else {\n          this.nickName.isValid = null\n        }\n      },\n\n      checkNote(event) {\n        return event.target.checkValidity();\n      },\n\n      submitEvent() {\n        let data = {};\n        if (this.nickNameValue !== '' && this.nickNameValue !== this.user.nickName) {\n          data['nickName'] = this.nickNameValue;\n        }\n        if (this.note !== this.user.note) {\n          data['note'] = this.note;\n        }\n        if (data['nickName'] || data['note']) {\n          updateProfile(data).then(resp => {\n            this.submit.valid(resp);\n            this.$store.commit('UPDATE_USER', data);\n          }).catch(error => {\n            this.submit.invalid(error)\n          })\n        } else {\n          this.submit.valid('设置未更改')\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .profile {\n    border: 1px solid #dee2e6!important;\n    /*box-shadow: 1px 1px 2px #aaaaaa, -1px -1px 2px #aaaaaa;*/\n  }\n\n  .profile-item {\n    /*border-bottom: 1px solid #dee2e6!important;*/\n    padding-top: 20px;\n    padding-bottom: 20px;\n  }\n\n  .profile-item input {\n    margin-left: 15px;\n  }\n\n  .profile-item textarea {\n    width: 80%;\n    resize: none;\n  }\n\n  .profile-item-border:last-child { /*被上一条覆盖*/\n    border-bottom: none;\n  }\n\n  .profile-btn {\n    position: relative;\n    bottom: 45px;\n    float: right;\n  }\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./profile.vue?vue&type=template&id=30689a01&scoped=true\"\nimport script from \"./profile.vue?vue&type=script&lang=js\"\nexport * from \"./profile.vue?vue&type=script&lang=js\"\nimport style0 from \"./profile.vue?vue&type=style&index=0&id=30689a01&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30689a01\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=style&index=0&id=30689a01&prod&scoped=true&lang=css\""],"sourceRoot":""}