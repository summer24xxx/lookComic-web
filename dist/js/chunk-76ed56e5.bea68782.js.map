{"version":3,"sources":["webpack:///./src/views/user/profile/profileSafety.vue","webpack:///src/views/user/profile/profileSafety.vue","webpack:///./src/views/user/profile/profileSafety.vue?c0d3","webpack:///./src/views/user/profile/profileSafety.vue?03c2","webpack:///./src/components/Sidebar/SidebarProfile.vue","webpack:///src/components/Sidebar/SidebarProfile.vue","webpack:///./src/components/Sidebar/SidebarProfile.vue?bc65","webpack:///./src/components/Sidebar/SidebarProfile.vue?3f09","webpack:///./src/views/user/profile/profileSafety.vue?b081"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","user","email","attrs","on","$event","preventDefault","updateEmail","apply","arguments","_m","directives","name","rawName","value","oldEmail","expression","class","inputClass","pattern","domProps","check","target","composing","$set","feedbackClass","feedback","newEmail","emailSubmit","updatePassword","oldPass","modifiers","newPass","checkNewPass","repeatPass","checkRepeatPass","passSubmit","staticRenderFns","components","SidebarProfile","data","EmailParam","ValidatorParam","PasswordParam","computed","_objectSpread","mapGetters","created","document","title","concat","username","methods","event","invalid","_this","isValid","then","resp","valid","$store","commit","safetyEmail","console","log","catch","_this2","updatePass","alert","dispatch","$router","push","component","active","url","$route"],"mappings":"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","file":"js/chunk-76ed56e5.bea68782.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row justify-content-center\"},[_c('sidebar-profile'),_c('div',{staticClass:\"profile mt-lg-1 col-6\"},[_c('div',{staticClass:\"profile-item\"},[_c('div',[_c('h4',[_vm._v(\"邮箱\")]),_c('span',{staticClass:\"text-muted\"},[_vm._v(\" \"+_vm._s(_vm.user.email ? _vm.user.email : '未设置')+\" \")])]),_c('div',{staticClass:\"profile-btn\"},[_c('a',{attrs:{\"aria-expanded\":\"false\",\"data-target\":\"#collapseEmail\",\"data-toggle\":\"collapse\",\"href\":\"#\"}},[_vm._v(\" \"+_vm._s(_vm.user.email ? '修改' : '设置')+\" \")])]),_c('div',{staticClass:\"collapse pt-2\",attrs:{\"id\":\"collapseEmail\"}},[_c('form',{staticClass:\"card card-body\",attrs:{\"id\":\"email-form\",\"novalidate\":\"\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.updateEmail.apply(null, arguments)}}},[_c('div',{staticClass:\"row mb-2\"},[_vm._m(0),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.oldEmail.value),expression:\"oldEmail.value\"}],staticClass:\"form-control col-4\",class:_vm.oldEmail.inputClass(),attrs:{\"pattern\":_vm.oldEmail.pattern,\"id\":\"old-email\",\"placeholder\":\"输入旧邮箱\",\"required\":\"\",\"type\":\"text\"},domProps:{\"value\":(_vm.oldEmail.value)},on:{\"change\":function($event){return _vm.oldEmail.check($event)},\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.oldEmail, \"value\", $event.target.value)}}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.oldEmail.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.oldEmail.feedback)+\" \")])]),_c('div',{staticClass:\"row mb-2\"},[_vm._m(1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newEmail.value),expression:\"newEmail.value\"}],staticClass:\"form-control col-4\",class:_vm.newEmail.inputClass(),attrs:{\"pattern\":_vm.newEmail.pattern,\"id\":\"new-email\",\"placeholder\":\"输入新邮箱\",\"required\":\"\",\"type\":\"text\"},domProps:{\"value\":(_vm.newEmail.value)},on:{\"change\":function($event){return _vm.newEmail.check($event)},\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.newEmail, \"value\", $event.target.value)}}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.newEmail.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.newEmail.feedback)+\" \")])]),_c('div',{staticClass:\"row pt-2\"},[_c('div',{staticClass:\"col-2\"}),_c('input',{staticClass:\"btn btn-danger col-2\",class:_vm.emailSubmit.inputClass(),attrs:{\"id\":\"email-submit\",\"type\":\"submit\"},domProps:{\"value\":_vm.user.email ? '修改邮箱' : '设置邮箱'}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.emailSubmit.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.emailSubmit.feedback)+\" \")])])])])]),_c('div',{staticClass:\"profile-item\"},[_c('div',{staticClass:\"profile-item\"},[_vm._m(2),_c('div',{staticClass:\"collapse pt-2\",attrs:{\"id\":\"collapsePassword\"}},[_c('form',{staticClass:\"card card-body\",attrs:{\"id\":\"password-form\",\"novalidate\":\"\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.updatePassword.apply(null, arguments)}}},[_c('div',{staticClass:\"row mb-2\"},[_vm._m(3),_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy\",value:(_vm.oldPass.value),expression:\"oldPass.value\",modifiers:{\"lazy\":true}}],staticClass:\"form-control col-4\",class:_vm.oldPass.inputClass(),attrs:{\"pattern\":_vm.oldPass.pattern,\"id\":\"old-password\",\"placeholder\":\"输入旧密码\",\"required\":\"\",\"type\":\"password\"},domProps:{\"value\":(_vm.oldPass.value)},on:{\"change\":[function($event){return _vm.$set(_vm.oldPass, \"value\", $event.target.value)},function($event){return _vm.oldPass.check($event)}]}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.oldPass.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.oldPass.feedback)+\" \")])]),_c('div',{staticClass:\"row mb-2\"},[_vm._m(4),_c('input',{directives:[{name:\"model\",rawName:\"v-model.lazy\",value:(_vm.newPass.value),expression:\"newPass.value\",modifiers:{\"lazy\":true}}],staticClass:\"form-control col-4\",class:_vm.newPass.inputClass(),attrs:{\"pattern\":_vm.newPass.pattern,\"id\":\"new-password\",\"placeholder\":\"输入新密码\",\"required\":\"\",\"type\":\"password\"},domProps:{\"value\":(_vm.newPass.value)},on:{\"change\":[function($event){return _vm.$set(_vm.newPass, \"value\", $event.target.value)},_vm.checkNewPass]}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.newPass.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.newPass.feedback)+\" \")])]),_c('div',{staticClass:\"row mb-2\"},[_vm._m(5),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.repeatPass.value),expression:\"repeatPass.value\"}],staticClass:\"form-control col-4\",class:_vm.repeatPass.inputClass(),attrs:{\"pattern\":_vm.repeatPass.pattern,\"id\":\"repeat-password\",\"placeholder\":\"重复新密码\",\"required\":\"\",\"type\":\"password\"},domProps:{\"value\":(_vm.repeatPass.value)},on:{\"change\":_vm.checkRepeatPass,\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.repeatPass, \"value\", $event.target.value)}}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.repeatPass.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.repeatPass.feedback)+\" \")])]),_c('div',{staticClass:\"row pt-2\"},[_c('div',{staticClass:\"col-2\"}),_c('input',{staticClass:\"btn btn-danger col-2\",class:_vm.passSubmit.inputClass(),attrs:{\"type\":\"submit\",\"value\":\"修改密码\"}}),_c('div',{staticClass:\"col align-self-center text-left\",class:_vm.passSubmit.feedbackClass()},[_vm._v(\" \"+_vm._s(_vm.passSubmit.feedback)+\" \")])])])])])])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right align-self-center\"},[_c('label',{attrs:{\"for\":\"old-email\"}},[_vm._v(\"旧邮箱: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right align-self-center\"},[_c('label',{attrs:{\"for\":\"new-email\"}},[_vm._v(\"新邮箱: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"profile-btn\"},[_c('a',{attrs:{\"aria-expanded\":\"false\",\"data-target\":\"#collapsePassword\",\"data-toggle\":\"collapse\",\"href\":\"#\"}},[_vm._v(\"修改密码\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right align-self-center\"},[_c('label',{attrs:{\"for\":\"old-password\"}},[_vm._v(\"旧密码: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right align-self-center\"},[_c('label',{attrs:{\"for\":\"new-password\"}},[_vm._v(\"新密码: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 text-right align-self-center\"},[_c('label',{attrs:{\"for\":\"repeat-password\"}},[_vm._v(\"重复密码: \")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"row justify-content-center\">\n    <sidebar-profile></sidebar-profile>\n    <div class=\"profile mt-lg-1 col-6\">\n      <div class=\"profile-item\">\n        <div>\n          <h4>邮箱</h4>\n          <span class=\"text-muted\">\n            {{ user.email ? user.email : '未设置'}}\n          </span>\n        </div>\n        <div class=\"profile-btn\">\n          <a aria-expanded=\"false\" data-target=\"#collapseEmail\"\n             data-toggle=\"collapse\" href=\"#\">\n            {{ user.email ? '修改' : '设置'}}\n          </a>\n        </div>\n        <div class=\"collapse pt-2\" id=\"collapseEmail\">\n          <form @submit.prevent=\"updateEmail\" class=\"card card-body\" id=\"email-form\" novalidate>\n            <div class=\"row mb-2\">\n              <div class=\"col-2 text-right align-self-center\">\n                <label for=\"old-email\">旧邮箱: </label>\n              </div>\n              <input :class=\"oldEmail.inputClass()\" :pattern=\"oldEmail.pattern\"\n                     @change=\"oldEmail.check($event)\" class=\"form-control col-4\"\n                     id=\"old-email\" placeholder=\"输入旧邮箱\"\n                     required type=\"text\" v-model=\"oldEmail.value\">\n              <div :class=\"oldEmail.feedbackClass()\"\n                   class=\"col align-self-center text-left\">\n                {{ oldEmail.feedback }}\n              </div>\n            </div>\n            <div class=\"row mb-2\">\n              <div class=\"col-2 text-right align-self-center\">\n                <label for=\"new-email\">新邮箱: </label>\n              </div>\n              <input :class=\"newEmail.inputClass()\" :pattern=\"newEmail.pattern\"\n                     @change=\"newEmail.check($event)\" class=\"form-control col-4\"\n                     id=\"new-email\" placeholder=\"输入新邮箱\"\n                     required type=\"text\" v-model=\"newEmail.value\">\n              <div :class=\"newEmail.feedbackClass()\"\n                   class=\"col align-self-center text-left\">\n                {{ newEmail.feedback }}\n              </div>\n            </div>\n            <div class=\"row pt-2\">\n              <div class=\"col-2\"></div>\n              <input :class=\"emailSubmit.inputClass()\" :value=\"user.email ? '修改邮箱' : '设置邮箱'\"\n                     class=\"btn btn-danger col-2\"\n                     id=\"email-submit\"\n                     type=\"submit\">\n              <div :class=\"emailSubmit.feedbackClass()\"\n                   class=\"col align-self-center text-left\">\n                {{ emailSubmit.feedback }}\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      <div class=\"profile-item\">\n        <div class=\"profile-item\">\n          <div class=\"profile-btn\">\n            <a aria-expanded=\"false\" data-target=\"#collapsePassword\" data-toggle=\"collapse\" href=\"#\">修改密码</a>\n          </div>\n          <div class=\"collapse pt-2\" id=\"collapsePassword\">\n            <form @submit.prevent=\"updatePassword\" class=\"card card-body\" id=\"password-form\" novalidate>\n              <div class=\"row mb-2\">\n                <div class=\"col-2 text-right align-self-center\">\n                  <label for=\"old-password\">旧密码: </label>\n                </div>\n                <input :class=\"oldPass.inputClass()\" :pattern=\"oldPass.pattern\"\n                       @change=\"oldPass.check($event)\" class=\"form-control col-4\"\n                       id=\"old-password\" placeholder=\"输入旧密码\"\n                       required type=\"password\" v-model.lazy=\"oldPass.value\">\n                <div :class=\"oldPass.feedbackClass()\"\n                     class=\"col align-self-center text-left\">\n                  {{ oldPass.feedback }}\n                </div>\n              </div>\n              <div class=\"row mb-2\">\n                <div class=\"col-2 text-right align-self-center\">\n                  <label for=\"new-password\">新密码: </label>\n                </div>\n                <input :class=\"newPass.inputClass()\" :pattern=\"newPass.pattern\"\n                       @change=\"checkNewPass\" class=\"form-control col-4\"\n                       id=\"new-password\" placeholder=\"输入新密码\"\n                       required type=\"password\" v-model.lazy=\"newPass.value\">\n                <div :class=\"newPass.feedbackClass()\"\n                     class=\"col align-self-center text-left\">\n                  {{ newPass.feedback }}\n                </div>\n              </div>\n              <div class=\"row mb-2\">\n                <div class=\"col-2 text-right align-self-center\">\n                  <label for=\"repeat-password\">重复密码: </label>\n                </div>\n                <input :class=\"repeatPass.inputClass()\" :pattern=\"repeatPass.pattern\"\n                       @change=\"checkRepeatPass\" class=\"form-control col-4\"\n                       id=\"repeat-password\" placeholder=\"重复新密码\"\n                       required type=\"password\" v-model=\"repeatPass.value\">\n                <div :class=\"repeatPass.feedbackClass()\"\n                     class=\"col align-self-center text-left\">\n                  {{ repeatPass.feedback }}\n                </div>\n              </div>\n              <div class=\"row pt-2\">\n                <div class=\"col-2\"></div>\n                <input :class=\"passSubmit.inputClass()\" class=\"btn btn-danger col-2\" type=\"submit\"\n                       value=\"修改密码\"/>\n                <div :class=\"passSubmit.feedbackClass()\"\n                     class=\"col align-self-center text-left\">\n                  {{ passSubmit.feedback }}\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import SidebarProfile from \"@/components/Sidebar/SidebarProfile\";\n  import {mapGetters} from \"vuex\";\n  import ValidatorParam, {EmailParam, PasswordParam} from \"@/utils/ValidatorParam\";\n  import {safetyEmail} from \"@/utils/utils\";\n  import {updateEmail, updatePass} from \"@/api/user\";\n\n  export default {\n    name: \"profileSafety\",\n    components: {SidebarProfile},\n\n    data() {\n      return {\n        oldEmail: new EmailParam(),\n        newEmail: new EmailParam(),\n        emailSubmit: new ValidatorParam(),\n\n        oldPass: new PasswordParam('', '密码格式错误'),\n        newPass: new PasswordParam('', '密码格式错误'),\n        repeatPass: new PasswordParam('', '密码格式错误'),\n        passSubmit: new ValidatorParam()\n      }\n    },\n\n    computed: {\n      ...mapGetters([\n        'user'\n      ])\n    },\n\n    created() {\n      document.title = `安全设置 - ${this.user.username}`\n    },\n\n    methods: {\n      checkNewPass(event) {\n        if (this.oldPass.value === this.newPass.value) {\n          this.newPass.invalid('新旧密码相同');\n        } else {\n          this.newPass.check(event)\n        }\n      },\n\n      checkRepeatPass(event) {\n        if (this.repeatPass.value !== this.newPass.value) {\n          this.repeatPass.invalid('两次密码不同');\n        } else {\n          this.repeatPass.check(event)\n        }\n      },\n\n      updateEmail() {\n        if (this.oldEmail.isValid && this.newEmail.isValid) {\n          if (this.oldEmail.value === this.newEmail.value) {\n            this.emailSubmit.invalid('两次邮箱相同')\n          } else {\n            updateEmail({\n              'oldEmail': this.oldEmail.value,\n              'newEmail': this.newEmail.value\n            }).then(resp => {\n              this.emailSubmit.valid(resp);\n              this.$store.commit('UPDATE_USER', {email: safetyEmail(this.newEmail.value)});\n              console.log(this.user)\n            }).catch(resp => {\n              this.emailSubmit.invalid(resp)\n            })\n          }\n        }\n      },\n\n      updatePassword() {\n        if (this.oldPass.isValid && this.newPass.isValid && this.repeatPass.isValid) {\n          updatePass({\n            'oldPass': this.oldPass.value,\n            'newPass': this.newPass.value\n          }).then(resp => {\n            this.passSubmit.valid(resp);\n            alert('密码修改成功，请重新登陆');\n            this.$store.dispatch('Logout').then(() => {\n              this.$router.push('/login')\n            })\n          }).catch(resp => {\n            this.passSubmit.invalid(resp)\n          })\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .profile {\n    border: 1px solid #dee2e6!important;\n    /*box-shadow: 1px 1px 2px #aaaaaa, -1px -1px 2px #aaaaaa;*/\n  }\n\n  .profile-item {\n    /*border-bottom: 1px solid #dee2e6!important;*/\n    padding-top: 20px;\n    padding-bottom: 20px;\n  }\n\n  .profile-item input {\n    margin-left: 15px;\n  }\n\n  .profile-item textarea {\n    width: 80%;\n    resize: none;\n  }\n\n  .profile-item-border:last-child { /*被上一条覆盖*/\n    border-bottom: none;\n  }\n\n  .profile-btn {\n    position: relative;\n    bottom: 45px;\n    float: right;\n  }\n\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./profileSafety.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./profileSafety.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./profileSafety.vue?vue&type=template&id=0edb1d2a&scoped=true\"\nimport script from \"./profileSafety.vue?vue&type=script&lang=js\"\nexport * from \"./profileSafety.vue?vue&type=script&lang=js\"\nimport style0 from \"./profileSafety.vue?vue&type=style&index=0&id=0edb1d2a&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0edb1d2a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-2 mt-lg-1\"},[_c('ul',{staticClass:\"nav flex-column text-center nav-pills bg-gray border\"},[_c('li',{staticClass:\"nav-item list-group-item-action mt-2 mb-2 border-bottom\"},[_c('router-link',{staticClass:\"nav-link\",class:{active: _vm.url === 'Profile'},attrs:{\"to\":\"/user/profile\"}},[_vm._v(\" 基本信息 \")])],1),_c('li',{staticClass:\"nav-item list-group-item-action mt-2 mb-2\"},[_c('router-link',{staticClass:\"nav-link\",class:{active: _vm.url === 'ProfileSafety'},attrs:{\"to\":\"/user/profile/safety\"}},[_vm._v(\" 账号安全 \")])],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"col-2 mt-lg-1\">\n    <ul class=\"nav flex-column text-center nav-pills bg-gray border\">\n      <li class=\"nav-item list-group-item-action mt-2 mb-2 border-bottom\">\n        <router-link :class=\"{active: url === 'Profile'}\" class=\"nav-link\"\n                     to=\"/user/profile\">\n          基本信息\n        </router-link>\n      </li>\n      <li class=\"nav-item list-group-item-action mt-2 mb-2\">\n        <router-link :class=\"{active: url === 'ProfileSafety'}\" class=\"nav-link\"\n                     to=\"/user/profile/safety\">\n          账号安全\n        </router-link>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"SidebarProfile\",\n\n    computed: {\n      url() {\n        return this.$route.name\n      }\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidebarProfile.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidebarProfile.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SidebarProfile.vue?vue&type=template&id=2c49d031&scoped=true\"\nimport script from \"./SidebarProfile.vue?vue&type=script&lang=js\"\nexport * from \"./SidebarProfile.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c49d031\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./profileSafety.vue?vue&type=style&index=0&id=0edb1d2a&prod&scoped=true&lang=css\""],"sourceRoot":""}