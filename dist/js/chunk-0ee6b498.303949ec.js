(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ee6b498"],{2532:function(t,e,a){"use strict";var s=a("23e7"),n=a("e330"),i=a("5a34"),o=a("1d80"),r=a("577e"),c=a("ab13"),l=n("".indexOf);s({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~l(r(o(this)),r(i(t)),arguments.length>1?arguments[1]:void 0)}})},"76dd":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return t.pages.pages>1?e("nav",{staticClass:"mt-3",attrs:{"aria-label":"Page navigation example",id:"nav-pag"}},[e("ul",{staticClass:"pagination justify-content-center"},[e("li",{staticClass:"page-item",class:{disabled:t.pages.isFirstPage}},[e("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"},on:{click:function(e){return e.preventDefault(),t.action(t.pages.prePage,t.pages.pageSize)}}},[t._v(" Previous ")])]),t._l(t.pages.pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:a===t.pages.pageNum}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.action(a,t.pages.pageSize)}}},[t._v(" "+t._s(a)+" ")])])})),e("li",{staticClass:"page-item",class:{disabled:t.pages.isLastPage}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.action(t.pages.nextPage,t.pages.pageSize)}}},[t._v(" Next ")])])],2)]):t._e()},n=[],i={name:"NavPag",props:{pages:Object,action:Function},data:function(){return{path:this.$route.path}}},o=i,r=a("2877"),c=Object(r["a"])(o,s,n,!1,null,"08d8b84e",null);e["a"]=c.exports},a15b:function(t,e,a){"use strict";var s=a("23e7"),n=a("e330"),i=a("44ad"),o=a("fc6a"),r=a("a640"),c=n([].join),l=i!==Object,u=l||!r("join",",");s({target:"Array",proto:!0,forced:u},{join:function(t){return c(o(this),void 0===t?",":t)}})},aca4:function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-2 mt-lg-5"},[e("ul",{staticClass:"nav flex-column text-center nav-pills bg-gray"},[e("li",{staticClass:"nav-item list-group-item-action pt-2 pb-2 border-bottom"},[e("router-link",{staticClass:"nav-link",class:{active:"AdminComicLocal"===t.$route.name},attrs:{to:"/admin/comic/index"}},[t._v(" 漫画管理 ")])],1),t.hasRole("ROLE_LADMIN")?e("li",{staticClass:"nav-item list-group-item-action pt-2 pb-2 border-bottom"},[e("router-link",{staticClass:"nav-link",class:{active:"ComicLocal"===t.$route.name},attrs:{to:"/admin/comic/addList"}},[t._v(" 添加漫画 ")])],1):t._e(),e("li",{staticClass:"nav-item list-group-item-action pt-2 pb-2 border-bottom"},[e("router-link",{staticClass:"nav-link",class:{active:"Account"===t.$route.name},attrs:{to:"/admin/account/index"}},[t._v(" 账号管理 ")])],1)])])},n=[],i=a("3786"),o={name:"SidebarAdmin",methods:{hasRole:function(t){return Object(i["b"])(t)}}},r=o,c=a("2877"),l=Object(c["a"])(r,s,n,!1,null,"a867065a",null);e["a"]=l.exports},c688:function(t,e,a){"use strict";a.r(e);a("a15b");var s=function(){var t=this,e=t._self._c;return t.users?e("div",[e("nav-pag",{attrs:{action:t.fetchData,pages:t.users}}),e("div",{staticClass:"row"},[e("sidebar-admin"),e("div",{staticClass:"col"},[e("table",{staticClass:"table table-striped justify-content-center"},[t._m(0),e("tbody",t._l(t.users.list,(function(a,s){return e("tr",{key:s},[e("th",{attrs:{scope:"row"}},[t._v(t._s(s+t.users.startRow))]),e("td",[t._v(t._s(a.username))]),e("td",[t._v(t._s(t.formatDate(a.createTime)))]),e("td",[t._v(t._s(t.roles[a.id].join(",")))]),e("td",[e("select",{staticClass:"add-roles form-control",on:{change:function(e){return t.addRole(a.id,e)}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Choose...")]),t._l(t.addableRoles(t.roles[a.id]),(function(a){return e("option",{key:a.id,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])}))],2)]),e("td",[e("select",{staticClass:"remove-roles form-control",on:{change:function(e){return t.removeRole(a.id,e)}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Choose...")]),t._l(t.removableRoles(t.roles[a.id]),(function(a){return e("option",{key:a.id,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])}))],2)]),e("td",[e("input",{staticClass:"status-checkbox",attrs:{type:"checkbox"},domProps:{checked:a.status},on:{change:function(e){return t.toggleStatus(a.id,e)}}})])])})),0)])])],1),e("nav-pag",{attrs:{action:t.fetchData,pages:t.users}})],1):e("div",{staticClass:"text-center"},[e("h4",[t._v("加载中")])])},n=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("用户名")]),e("th",{attrs:{scope:"col"}},[t._v("创建时间")]),e("th",{attrs:{scope:"col"}},[t._v("用户角色")]),e("th",{attrs:{scope:"col"}},[t._v("增加角色")]),e("th",{attrs:{scope:"col"}},[t._v("移除角色")]),e("th",{attrs:{scope:"col"}},[t._v("禁用/启用")])])])}],i=(a("4de4"),a("caad"),a("14d9"),a("a434"),a("d3b7"),a("2532"),a("76dd")),o=a("aca4"),r=a("fa7d"),c=a("3786"),l=a("4ec3"),u={name:"Account",components:{SidebarAdmin:o["a"],NavPag:i["a"]},data:function(){return{users:null,allRoles:null,roles:null}},created:function(){this.fetchData()},methods:{formatDate:function(t){return Object(r["b"])(t)},addableRoles:function(t){return this.allRoles.filter((function(e){return!t.includes(e)&&!("ROLE_LADMIN"===e&&!Object(c["b"])("ROLE_LADMIN"))}))},removableRoles:function(t){return t.filter((function(t){return!("ROLE_LADMIN"===t&&!Object(c["b"])("ROLE_LADMIN"))}))},fetchData:function(){var t=this;l["e"].get("/api/admin/account/index",{params:this.$route.query}).then((function(e){t.users=e["users"],t.allRoles=e["all_roles"],t.roles=e["roles"]}))},addRole:function(t,e){var a=this;this.postRequest("/api/admin/account/addRole",{userId:t,role:e.target.value}).then((function(){a.roles[t].push(e.target.value),e.target.selectedIndex=0}))},removeRole:function(t,e){var a=this;this.postRequest("/api/admin/account/removeRole",{userId:t,role:e.target.value}).then((function(){a.roles[t].splice(e.target.selectedIndex-1,1),e.target.selectedIndex=0}))},toggleStatus:function(t,e){e.target.checked?this.postRequest("/api/admin/account/enabledUser",{userId:t}):this.postRequest("/api/admin/account/disabledUser",{userId:t})}}},d=u,p=a("2877"),v=Object(p["a"])(d,s,n,!1,null,"de203dd2",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-0ee6b498.303949ec.js.map